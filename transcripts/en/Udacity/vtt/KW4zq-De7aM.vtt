WEBVTT
Kind: captions
Language: en

00:00:00.000 --> 00:00:07.000
If this is our hypothesis, we now must devise an experiment to further refine this hypothesis.

00:00:07.000 --> 00:00:12.000
Let's come up with a very simple input where we'd assume that this holds.

00:00:12.000 --> 00:00:20.000
If we put in just "foo" without any tags, we would assume that we would get the very same output.

00:00:20.000 --> 00:00:22.000
Let's do this as an experiment.

00:00:22.000 --> 00:00:26.000
Here again, we have a buggy function and now let's conduct the experiment.

00:00:26.000 --> 00:00:31.000
So we invoke print-html-markup with foo enclosing double quotes.

00:00:31.000 --> 00:00:34.000
We press run and the output is foo, without double quote.

00:00:34.000 --> 00:00:38.000
So, now we see the output It's not what we'd expected,

00:00:38.000 --> 00:00:43.000
the output being foo without quotes and this again confirm our hypothesis.

00:00:43.000 --> 00:00:47.000
We can try this out with even more strings, further strengthening our hypothesis.

00:00:47.000 --> 00:00:51.000
So if we put in bar, a very surprising thing is going to happen.

00:00:51.000 --> 00:00:54.000
We get bar as output and if we put in just a two quotes,

00:00:54.000 --> 00:00:58.000
what we get is an empty string, so we get more failures down the way.

00:00:58.000 --> 00:01:01.000
This hypothesis is confirmed now by a number of experiments,

00:01:01.000 --> 00:01:06.000
double quotes are stripped from tagged input, but actually we don't even have a new tag

00:01:06.000 --> 00:01:08.000
so we can actually scratch that.

00:01:08.000 --> 00:01:11.000
Double quotes are stripped from general input.

00:01:11.000 --> 00:01:14.000
So even if there's no tags, quotes are being stripped away.

00:01:14.000 --> 00:01:17.000
Now we can actually go and explore the cause-effect chain.

00:01:17.000 --> 00:01:21.000
If quotes have been stripped away, there must be a place in the code which does that.

00:01:21.000 --> 00:01:27.000
The only place in our code where quotes are handled, is right here in this line.

00:01:27.000 --> 00:01:32.000
Here we have: if there's a double quote or a single quote and tag is being set

00:01:32.000 --> 00:01:36.000
then quote be inverted and when quote is inverted, tags should not be recognized.

00:01:36.000 --> 00:01:41.000
Nothing too complicate, but why would the quotes be stripped? Because normally we should not be in tag mode.

00:01:41.000 --> 00:01:45.000
Maybe we are in tag mode, maybe the variable tag is set.

00:01:45.000 --> 00:01:49.000
So we can come up with a new hypothesis that explains precisely that.

