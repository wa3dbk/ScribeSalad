WEBVTT
Kind: captions
Language: en

00:00:00.000 --> 00:00:04.000
Sometimes during debugging, there are situations where you want to ensure

00:00:04.000 --> 00:00:07.000
that some property hold throughout the entire execution.

00:00:07.000 --> 00:00:09.000
Let me give you an example for that:

00:00:09.000 --> 00:00:15.000
suppose you have a very big Python program with dozens or even hundreds of modules,

00:00:15.000 --> 00:00:20.000
and suppose that due to some designed decision, there is one global variable called flag

00:00:20.000 --> 00:00:24.000
which is accessible from all these modules and all of these modules

00:00:24.000 --> 00:00:30.000
could possibly change the value of flag; they read flag, they write into flag.

00:00:30.000 --> 00:00:34.000
But now, you have a run in which flag should not be set and yet it is set.

00:00:34.000 --> 00:00:38.000
And you have all these places in the program where the variable could be set,

00:00:38.000 --> 00:00:41.000
but you don't know where this is.

00:00:41.000 --> 00:00:45.000
What you want to have in this situation is a check that is executed

00:00:45.000 --> 00:00:48.000
at every moment throughout the execution of the program

00:00:48.000 --> 00:00:52.000
and which monitors the moment in which flag is set to true.

00:00:52.000 --> 00:00:58.000
&gt;From a previous unit, you may remember the tracing functionality in Python.

00:00:58.000 --> 00:01:02.000
By using the sys.settrace function, you can specify a function,

00:01:02.000 --> 00:01:08.000
here traceit, that it will be executed after every single line is executed in your program.

00:01:08.000 --> 00:01:13.000
And we can set up this traceit function such that after every line,

00:01:13.000 --> 00:01:20.000
it checks the status of the global variable flag and aborts execution as soon as flag becomes true.

00:01:20.000 --> 00:01:26.000
As any such tracing function, it returns itself such that it will be executed with the next line.

00:01:26.000 --> 00:01:30.000
As soon as you have such as checker in place, the flag will be checked

00:01:30.000 --> 00:01:35.000
after every single line of execution and you will be able to monitor exactly where the flag is set.

00:01:35.000 --> 00:01:39.000
And this of course is true for arbitrary data structures.

00:01:39.000 --> 00:01:44.000
If you do have some data structures, say store, again which can be accessed

00:01:44.000 --> 00:01:50.000
from lots and lots of places, then a call say to a store.checkRep will ensure that store

00:01:50.000 --> 00:01:53.000
is consistent for every single line that's executed.

00:01:53.000 --> 00:01:57.000
Just be sure to turn this off while store is executing its own methods

00:01:57.000 --> 00:02:00.000
because, while these internal methods are running,

00:02:00.000 --> 00:02:04.000
store would naturally violate its own internal data invariants.

