WEBVTT
Kind: captions
Language: en

00:00:02.880 --> 00:00:06.099
[Music]

00:00:06.099 --> 00:00:06.109
[Music]
 

00:00:06.109 --> 00:00:08.450
[Music]
hi everyone thank you very much for

00:00:08.450 --> 00:00:08.460
hi everyone thank you very much for
 

00:00:08.460 --> 00:00:09.080
hi everyone thank you very much for
coming along

00:00:09.080 --> 00:00:09.090
coming along
 

00:00:09.090 --> 00:00:11.299
coming along
I'm Andrew I'm a software engineer on

00:00:11.299 --> 00:00:11.309
I'm Andrew I'm a software engineer on
 

00:00:11.309 --> 00:00:13.339
I'm Andrew I'm a software engineer on
the exoplayer team and I'm mark and

00:00:13.339 --> 00:00:13.349
the exoplayer team and I'm mark and
 

00:00:13.349 --> 00:00:16.010
the exoplayer team and I'm mark and
developer advocate for Android media so

00:00:16.010 --> 00:00:16.020
developer advocate for Android media so
 

00:00:16.020 --> 00:00:17.810
developer advocate for Android media so
in today's session we're hoping to

00:00:17.810 --> 00:00:17.820
in today's session we're hoping to
 

00:00:17.820 --> 00:00:20.300
in today's session we're hoping to
demonstrate how you can build really

00:00:20.300 --> 00:00:20.310
demonstrate how you can build really
 

00:00:20.310 --> 00:00:22.010
demonstrate how you can build really
really fully featured media playback

00:00:22.010 --> 00:00:22.020
really fully featured media playback
 

00:00:22.020 --> 00:00:24.349
really fully featured media playback
functionality into apps using quite

00:00:24.349 --> 00:00:24.359
functionality into apps using quite
 

00:00:24.359 --> 00:00:27.529
functionality into apps using quite
little code using exoplayer and to do

00:00:27.529 --> 00:00:27.539
little code using exoplayer and to do
 

00:00:27.539 --> 00:00:28.700
little code using exoplayer and to do
that we're going to guide you through

00:00:28.700 --> 00:00:28.710
that we're going to guide you through
 

00:00:28.710 --> 00:00:31.160
that we're going to guide you through
the process of building two applications

00:00:31.160 --> 00:00:31.170
the process of building two applications
 

00:00:31.170 --> 00:00:33.590
the process of building two applications
we're going to start by focusing on the

00:00:33.590 --> 00:00:33.600
we're going to start by focusing on the
 

00:00:33.600 --> 00:00:35.540
we're going to start by focusing on the
video use case we're going to build a

00:00:35.540 --> 00:00:35.550
video use case we're going to build a
 

00:00:35.550 --> 00:00:37.160
video use case we're going to build a
simple video player app that will play

00:00:37.160 --> 00:00:37.170
simple video player app that will play
 

00:00:37.170 --> 00:00:39.229
simple video player app that will play
an mp4 stream then we're going to show

00:00:39.229 --> 00:00:39.239
an mp4 stream then we're going to show
 

00:00:39.239 --> 00:00:41.330
an mp4 stream then we're going to show
you how to insert ads alongside that

00:00:41.330 --> 00:00:41.340
you how to insert ads alongside that
 

00:00:41.340 --> 00:00:43.430
you how to insert ads alongside that
video content then we're going to shift

00:00:43.430 --> 00:00:43.440
video content then we're going to shift
 

00:00:43.440 --> 00:00:45.560
video content then we're going to shift
our focus to audio we're going to show

00:00:45.560 --> 00:00:45.570
our focus to audio we're going to show
 

00:00:45.570 --> 00:00:47.360
our focus to audio we're going to show
you how to play audio in a background

00:00:47.360 --> 00:00:47.370
you how to play audio in a background
 

00:00:47.370 --> 00:00:49.100
you how to play audio in a background
service we're going to show you how to

00:00:49.100 --> 00:00:49.110
service we're going to show you how to
 

00:00:49.110 --> 00:00:50.900
service we're going to show you how to
integrate with Android media sessions

00:00:50.900 --> 00:00:50.910
integrate with Android media sessions
 

00:00:50.910 --> 00:00:52.880
integrate with Android media sessions
and finally we're going to take a look

00:00:52.880 --> 00:00:52.890
and finally we're going to take a look
 

00:00:52.890 --> 00:00:54.740
and finally we're going to take a look
at some new functionality we've we've

00:00:54.740 --> 00:00:54.750
at some new functionality we've we've
 

00:00:54.750 --> 00:00:57.110
at some new functionality we've we've
recently released for downloading media

00:00:57.110 --> 00:00:57.120
recently released for downloading media
 

00:00:57.120 --> 00:01:00.770
recently released for downloading media
for offline playback so like last year

00:01:00.770 --> 00:01:00.780
for offline playback so like last year
 

00:01:00.780 --> 00:01:02.510
for offline playback so like last year
we're hoping to have a mixture of some

00:01:02.510 --> 00:01:02.520
we're hoping to have a mixture of some
 

00:01:02.520 --> 00:01:04.250
we're hoping to have a mixture of some
introductory content and also some

00:01:04.250 --> 00:01:04.260
introductory content and also some
 

00:01:04.260 --> 00:01:05.750
introductory content and also some
coverage of slightly more tricky use

00:01:05.750 --> 00:01:05.760
coverage of slightly more tricky use
 

00:01:05.760 --> 00:01:07.399
coverage of slightly more tricky use
cases so hopefully there's something for

00:01:07.399 --> 00:01:07.409
cases so hopefully there's something for
 

00:01:07.409 --> 00:01:09.590
cases so hopefully there's something for
everyone and with that in mind I'm going

00:01:09.590 --> 00:01:09.600
everyone and with that in mind I'm going
 

00:01:09.600 --> 00:01:11.330
everyone and with that in mind I'm going
to start by saying a bit about what

00:01:11.330 --> 00:01:11.340
to start by saying a bit about what
 

00:01:11.340 --> 00:01:13.580
to start by saying a bit about what
exoplayer is for anyone who hasn't used

00:01:13.580 --> 00:01:13.590
exoplayer is for anyone who hasn't used
 

00:01:13.590 --> 00:01:18.890
exoplayer is for anyone who hasn't used
the library before ok clicker doesn't

00:01:18.890 --> 00:01:18.900
the library before ok clicker doesn't
 

00:01:18.900 --> 00:01:21.740
the library before ok clicker doesn't
seem to you're working next slide great

00:01:21.740 --> 00:01:21.750
seem to you're working next slide great
 

00:01:21.750 --> 00:01:24.530
seem to you're working next slide great
and so exoplayer is an application-level

00:01:24.530 --> 00:01:24.540
and so exoplayer is an application-level
 

00:01:24.540 --> 00:01:26.870
and so exoplayer is an application-level
media player that means that you choose

00:01:26.870 --> 00:01:26.880
media player that means that you choose
 

00:01:26.880 --> 00:01:28.670
media player that means that you choose
which version of exoplayer you'd like to

00:01:28.670 --> 00:01:28.680
which version of exoplayer you'd like to
 

00:01:28.680 --> 00:01:30.289
which version of exoplayer you'd like to
use and then you bundle the player

00:01:30.289 --> 00:01:30.299
use and then you bundle the player
 

00:01:30.299 --> 00:01:32.390
use and then you bundle the player
implementation into your application as

00:01:32.390 --> 00:01:32.400
implementation into your application as
 

00:01:32.400 --> 00:01:34.609
implementation into your application as
a dependency and what that gives you is

00:01:34.609 --> 00:01:34.619
a dependency and what that gives you is
 

00:01:34.619 --> 00:01:36.770
a dependency and what that gives you is
consistent playback functionality across

00:01:36.770 --> 00:01:36.780
consistent playback functionality across
 

00:01:36.780 --> 00:01:38.719
consistent playback functionality across
all different Android versions and

00:01:38.719 --> 00:01:38.729
all different Android versions and
 

00:01:38.729 --> 00:01:41.899
all different Android versions and
across all different devices exoplayer

00:01:41.899 --> 00:01:41.909
across all different devices exoplayer
 

00:01:41.909 --> 00:01:44.420
across all different devices exoplayer
works from API 16 that's Android jelly

00:01:44.420 --> 00:01:44.430
works from API 16 that's Android jelly
 

00:01:44.430 --> 00:01:46.520
works from API 16 that's Android jelly
bean upwards so with that you can reach

00:01:46.520 --> 00:01:46.530
bean upwards so with that you can reach
 

00:01:46.530 --> 00:01:49.819
bean upwards so with that you can reach
more than 99% of active devices the

00:01:49.819 --> 00:01:49.829
more than 99% of active devices the
 

00:01:49.829 --> 00:01:51.620
more than 99% of active devices the
project is open source is hosted on

00:01:51.620 --> 00:01:51.630
project is open source is hosted on
 

00:01:51.630 --> 00:01:54.410
project is open source is hosted on
github and we have an active community

00:01:54.410 --> 00:01:54.420
github and we have an active community
 

00:01:54.420 --> 00:01:56.179
github and we have an active community
there and you can file issues with

00:01:56.179 --> 00:01:56.189
there and you can file issues with
 

00:01:56.189 --> 00:01:58.370
there and you can file issues with
feature requests bugs and you can even

00:01:58.370 --> 00:01:58.380
feature requests bugs and you can even
 

00:01:58.380 --> 00:02:02.120
feature requests bugs and you can even
send us pull requests exoplayer is also

00:02:02.120 --> 00:02:02.130
send us pull requests exoplayer is also
 

00:02:02.130 --> 00:02:04.490
send us pull requests exoplayer is also
quite widely used both within google

00:02:04.490 --> 00:02:04.500
quite widely used both within google
 

00:02:04.500 --> 00:02:06.200
quite widely used both within google
applications like the YouTube app for

00:02:06.200 --> 00:02:06.210
applications like the YouTube app for
 

00:02:06.210 --> 00:02:08.800
applications like the YouTube app for
Android and also in Google Play Movies

00:02:08.800 --> 00:02:08.810
Android and also in Google Play Movies
 

00:02:08.810 --> 00:02:11.869
Android and also in Google Play Movies
it's also quite widely used in the wider

00:02:11.869 --> 00:02:11.879
it's also quite widely used in the wider
 

00:02:11.879 --> 00:02:13.640
it's also quite widely used in the wider
android community

00:02:13.640 --> 00:02:13.650
android community
 

00:02:13.650 --> 00:02:16.070
android community
and there are actually over 200,000

00:02:16.070 --> 00:02:16.080
and there are actually over 200,000
 

00:02:16.080 --> 00:02:18.619
and there are actually over 200,000
applications on the Playstore that are

00:02:18.619 --> 00:02:18.629
applications on the Playstore that are
 

00:02:18.629 --> 00:02:21.619
applications on the Playstore that are
using exoplayer and the team's always

00:02:21.619 --> 00:02:21.629
using exoplayer and the team's always
 

00:02:21.629 --> 00:02:23.270
using exoplayer and the team's always
really excited to see the kind of great

00:02:23.270 --> 00:02:23.280
really excited to see the kind of great
 

00:02:23.280 --> 00:02:24.649
really excited to see the kind of great
products that you're all building using

00:02:24.649 --> 00:02:24.659
products that you're all building using
 

00:02:24.659 --> 00:02:27.890
products that you're all building using
exoplayer since the last years talk

00:02:27.890 --> 00:02:27.900
exoplayer since the last years talk
 

00:02:27.900 --> 00:02:29.960
exoplayer since the last years talk
we've been working hard on both

00:02:29.960 --> 00:02:29.970
we've been working hard on both
 

00:02:29.970 --> 00:02:31.910
we've been working hard on both
stability and performance improvements

00:02:31.910 --> 00:02:31.920
stability and performance improvements
 

00:02:31.920 --> 00:02:34.309
stability and performance improvements
behind the scenes but also on some brand

00:02:34.309 --> 00:02:34.319
behind the scenes but also on some brand
 

00:02:34.319 --> 00:02:37.699
behind the scenes but also on some brand
new features and in doing that exoplayer

00:02:37.699 --> 00:02:37.709
new features and in doing that exoplayer
 

00:02:37.709 --> 00:02:39.350
new features and in doing that exoplayer
is gradually evolving into quite a

00:02:39.350 --> 00:02:39.360
is gradually evolving into quite a
 

00:02:39.360 --> 00:02:41.030
is gradually evolving into quite a
fully-featured solution for media

00:02:41.030 --> 00:02:41.040
fully-featured solution for media
 

00:02:41.040 --> 00:02:45.289
fully-featured solution for media
playback so here's some of the

00:02:45.289 --> 00:02:45.299
playback so here's some of the
 

00:02:45.299 --> 00:02:46.580
playback so here's some of the
highlights of the features that we've

00:02:46.580 --> 00:02:46.590
highlights of the features that we've
 

00:02:46.590 --> 00:02:48.949
highlights of the features that we've
added over the past year there's much

00:02:48.949 --> 00:02:48.959
added over the past year there's much
 

00:02:48.959 --> 00:02:51.289
added over the past year there's much
too much to go into detail on here but I

00:02:51.289 --> 00:02:51.299
too much to go into detail on here but I
 

00:02:51.299 --> 00:02:52.670
too much to go into detail on here but I
would encourage you to check out the

00:02:52.670 --> 00:02:52.680
would encourage you to check out the
 

00:02:52.680 --> 00:02:54.530
would encourage you to check out the
release notes in the root directory of

00:02:54.530 --> 00:02:54.540
release notes in the root directory of
 

00:02:54.540 --> 00:02:56.990
release notes in the root directory of
our github project where you can find

00:02:56.990 --> 00:02:57.000
our github project where you can find
 

00:02:57.000 --> 00:02:58.550
our github project where you can find
full details of all of the changes

00:02:58.550 --> 00:02:58.560
full details of all of the changes
 

00:02:58.560 --> 00:03:00.080
full details of all of the changes
included in each new release of the

00:03:00.080 --> 00:03:00.090
included in each new release of the
 

00:03:00.090 --> 00:03:04.009
included in each new release of the
player in today's talk we're just going

00:03:04.009 --> 00:03:04.019
player in today's talk we're just going
 

00:03:04.019 --> 00:03:06.020
player in today's talk we're just going
to cover a few highlights including

00:03:06.020 --> 00:03:06.030
to cover a few highlights including
 

00:03:06.030 --> 00:03:07.789
to cover a few highlights including
support for downloading media as I

00:03:07.789 --> 00:03:07.799
support for downloading media as I
 

00:03:07.799 --> 00:03:09.589
support for downloading media as I
mentioned and also support for player

00:03:09.589 --> 00:03:09.599
mentioned and also support for player
 

00:03:09.599 --> 00:03:12.619
mentioned and also support for player
notifications okay I think that's enough

00:03:12.619 --> 00:03:12.629
notifications okay I think that's enough
 

00:03:12.629 --> 00:03:14.960
notifications okay I think that's enough
on the slides let's get on with some

00:03:14.960 --> 00:03:14.970
on the slides let's get on with some
 

00:03:14.970 --> 00:03:17.030
on the slides let's get on with some
live coding and for each of these two

00:03:17.030 --> 00:03:17.040
live coding and for each of these two
 

00:03:17.040 --> 00:03:18.830
live coding and for each of these two
apps our video app and our audio app our

00:03:18.830 --> 00:03:18.840
apps our video app and our audio app our
 

00:03:18.840 --> 00:03:20.539
apps our video app and our audio app our
starting point will be a mostly empty

00:03:20.539 --> 00:03:20.549
starting point will be a mostly empty
 

00:03:20.549 --> 00:03:23.300
starting point will be a mostly empty
project because we want to show you as

00:03:23.300 --> 00:03:23.310
project because we want to show you as
 

00:03:23.310 --> 00:03:24.710
project because we want to show you as
much of the interesting code as possible

00:03:24.710 --> 00:03:24.720
much of the interesting code as possible
 

00:03:24.720 --> 00:03:27.379
much of the interesting code as possible
but we're going to provide a link to a

00:03:27.379 --> 00:03:27.389
but we're going to provide a link to a
 

00:03:27.389 --> 00:03:29.390
but we're going to provide a link to a
branch on our github project where you

00:03:29.390 --> 00:03:29.400
branch on our github project where you
 

00:03:29.400 --> 00:03:31.069
branch on our github project where you
can check out the code afterwards if you

00:03:31.069 --> 00:03:31.079
can check out the code afterwards if you
 

00:03:31.079 --> 00:03:32.240
can check out the code afterwards if you
want to look at things in a bit more

00:03:32.240 --> 00:03:32.250
want to look at things in a bit more
 

00:03:32.250 --> 00:03:34.430
want to look at things in a bit more
detail okay mark are you ready to do

00:03:34.430 --> 00:03:34.440
detail okay mark are you ready to do
 

00:03:34.440 --> 00:03:37.369
detail okay mark are you ready to do
some furious typing yes I am great okay

00:03:37.369 --> 00:03:37.379
some furious typing yes I am great okay
 

00:03:37.379 --> 00:03:38.979
some furious typing yes I am great okay
if we can switch to the laptop please

00:03:38.979 --> 00:03:38.989
if we can switch to the laptop please
 

00:03:38.989 --> 00:03:41.839
if we can switch to the laptop please
our starting point is a mostly empty

00:03:41.839 --> 00:03:41.849
our starting point is a mostly empty
 

00:03:41.849 --> 00:03:44.240
our starting point is a mostly empty
project as I mentioned and we're going

00:03:44.240 --> 00:03:44.250
project as I mentioned and we're going
 

00:03:44.250 --> 00:03:45.770
project as I mentioned and we're going
to make a video player app where we

00:03:45.770 --> 00:03:45.780
to make a video player app where we
 

00:03:45.780 --> 00:03:47.360
to make a video player app where we
start playing the stream as soon as the

00:03:47.360 --> 00:03:47.370
start playing the stream as soon as the
 

00:03:47.370 --> 00:03:49.009
start playing the stream as soon as the
app comes into the foreground and then

00:03:49.009 --> 00:03:49.019
app comes into the foreground and then
 

00:03:49.019 --> 00:03:50.330
app comes into the foreground and then
we stop playing the stream when we go

00:03:50.330 --> 00:03:50.340
we stop playing the stream when we go
 

00:03:50.340 --> 00:03:52.369
we stop playing the stream when we go
into the background and to do that the

00:03:52.369 --> 00:03:52.379
into the background and to do that the
 

00:03:52.379 --> 00:03:53.960
into the background and to do that the
first step is going to be to add a

00:03:53.960 --> 00:03:53.970
first step is going to be to add a
 

00:03:53.970 --> 00:03:56.119
first step is going to be to add a
dependency on the exoplayer core library

00:03:56.119 --> 00:03:56.129
dependency on the exoplayer core library
 

00:03:56.129 --> 00:03:58.339
dependency on the exoplayer core library
and this provides the main interface to

00:03:58.339 --> 00:03:58.349
and this provides the main interface to
 

00:03:58.349 --> 00:03:59.720
and this provides the main interface to
the player that you can use to control

00:03:59.720 --> 00:03:59.730
the player that you can use to control
 

00:03:59.730 --> 00:04:02.449
the player that you can use to control
playback from within code as you can see

00:04:02.449 --> 00:04:02.459
playback from within code as you can see
 

00:04:02.459 --> 00:04:04.220
playback from within code as you can see
marks added a dependency on the core

00:04:04.220 --> 00:04:04.230
marks added a dependency on the core
 

00:04:04.230 --> 00:04:05.750
marks added a dependency on the core
library with the version two point eight

00:04:05.750 --> 00:04:05.760
library with the version two point eight
 

00:04:05.760 --> 00:04:07.970
library with the version two point eight
point zero which is the new release that

00:04:07.970 --> 00:04:07.980
point zero which is the new release that
 

00:04:07.980 --> 00:04:10.009
point zero which is the new release that
we've done this week he's also add a

00:04:10.009 --> 00:04:10.019
we've done this week he's also add a
 

00:04:10.019 --> 00:04:11.990
we've done this week he's also add a
dependency added a dependency on the

00:04:11.990 --> 00:04:12.000
dependency added a dependency on the
 

00:04:12.000 --> 00:04:15.289
dependency added a dependency on the
optional UI module this provides some

00:04:15.289 --> 00:04:15.299
optional UI module this provides some
 

00:04:15.299 --> 00:04:17.599
optional UI module this provides some
customizable high-level UI components

00:04:17.599 --> 00:04:17.609
customizable high-level UI components
 

00:04:17.609 --> 00:04:19.189
customizable high-level UI components
which you can put into your applications

00:04:19.189 --> 00:04:19.199
which you can put into your applications
 

00:04:19.199 --> 00:04:21.649
which you can put into your applications
for things like showing a video player

00:04:21.649 --> 00:04:21.659
for things like showing a video player
 

00:04:21.659 --> 00:04:23.420
for things like showing a video player
interview that's player view which we're

00:04:23.420 --> 00:04:23.430
interview that's player view which we're
 

00:04:23.430 --> 00:04:26.000
interview that's player view which we're
going to use today and it also provides

00:04:26.000 --> 00:04:26.010
going to use today and it also provides
 

00:04:26.010 --> 00:04:27.540
going to use today and it also provides
playback control of you and some

00:04:27.540 --> 00:04:27.550
playback control of you and some
 

00:04:27.550 --> 00:04:28.920
playback control of you and some
the components and these are all very

00:04:28.920 --> 00:04:28.930
the components and these are all very
 

00:04:28.930 --> 00:04:31.200
the components and these are all very
customizable so you can change which

00:04:31.200 --> 00:04:31.210
customizable so you can change which
 

00:04:31.210 --> 00:04:33.300
customizable so you can change which
icons you're using you can customize the

00:04:33.300 --> 00:04:33.310
icons you're using you can customize the
 

00:04:33.310 --> 00:04:35.939
icons you're using you can customize the
layouts and so on so you can see that

00:04:35.939 --> 00:04:35.949
layouts and so on so you can see that
 

00:04:35.949 --> 00:04:37.860
layouts and so on so you can see that
mark has added a player view which is

00:04:37.860 --> 00:04:37.870
mark has added a player view which is
 

00:04:37.870 --> 00:04:40.050
mark has added a player view which is
going to fill the activity and he's

00:04:40.050 --> 00:04:40.060
going to fill the activity and he's
 

00:04:40.060 --> 00:04:41.909
going to fill the activity and he's
given it an identifier player underscore

00:04:41.909 --> 00:04:41.919
given it an identifier player underscore
 

00:04:41.919 --> 00:04:43.409
given it an identifier player underscore
view so we'll be able to access it from

00:04:43.409 --> 00:04:43.419
view so we'll be able to access it from
 

00:04:43.419 --> 00:04:45.809
view so we'll be able to access it from
code now if we switch over to our main

00:04:45.809 --> 00:04:45.819
code now if we switch over to our main
 

00:04:45.819 --> 00:04:48.809
code now if we switch over to our main
activity we can see in our on create

00:04:48.809 --> 00:04:48.819
activity we can see in our on create
 

00:04:48.819 --> 00:04:51.540
activity we can see in our on create
method we can get access to that view

00:04:51.540 --> 00:04:51.550
method we can get access to that view
 

00:04:51.550 --> 00:04:54.779
method we can get access to that view
using find view by ID and once we've got

00:04:54.779 --> 00:04:54.789
using find view by ID and once we've got
 

00:04:54.789 --> 00:04:56.580
using find view by ID and once we've got
access to that view then the next step

00:04:56.580 --> 00:04:56.590
access to that view then the next step
 

00:04:56.590 --> 00:04:58.080
access to that view then the next step
we're going to take is to actually

00:04:58.080 --> 00:04:58.090
we're going to take is to actually
 

00:04:58.090 --> 00:05:02.850
we're going to take is to actually
initialize the player okay so once we've

00:05:02.850 --> 00:05:02.860
initialize the player okay so once we've
 

00:05:02.860 --> 00:05:03.990
initialize the player okay so once we've
got our player view in a field

00:05:03.990 --> 00:05:04.000
got our player view in a field
 

00:05:04.000 --> 00:05:07.770
got our player view in a field
let's override the on start method and

00:05:07.770 --> 00:05:07.780
let's override the on start method and
 

00:05:07.780 --> 00:05:09.149
let's override the on start method and
in on start we're going to initialize

00:05:09.149 --> 00:05:09.159
in on start we're going to initialize
 

00:05:09.159 --> 00:05:12.240
in on start we're going to initialize
the player to initialize the player

00:05:12.240 --> 00:05:12.250
the player to initialize the player
 

00:05:12.250 --> 00:05:14.040
the player to initialize the player
we're going to use a static method on

00:05:14.040 --> 00:05:14.050
we're going to use a static method on
 

00:05:14.050 --> 00:05:16.439
we're going to use a static method on
the exoplayer factory called new simple

00:05:16.439 --> 00:05:16.449
the exoplayer factory called new simple
 

00:05:16.449 --> 00:05:18.390
the exoplayer factory called new simple
instance this is going to give us a

00:05:18.390 --> 00:05:18.400
instance this is going to give us a
 

00:05:18.400 --> 00:05:20.430
instance this is going to give us a
simple exoplayer instance now it might

00:05:20.430 --> 00:05:20.440
simple exoplayer instance now it might
 

00:05:20.440 --> 00:05:22.290
simple exoplayer instance now it might
sound like simple exoplayer is only for

00:05:22.290 --> 00:05:22.300
sound like simple exoplayer is only for
 

00:05:22.300 --> 00:05:24.390
sound like simple exoplayer is only for
really basic stuff but actually simple

00:05:24.390 --> 00:05:24.400
really basic stuff but actually simple
 

00:05:24.400 --> 00:05:25.800
really basic stuff but actually simple
exit players are recommended way of

00:05:25.800 --> 00:05:25.810
exit players are recommended way of
 

00:05:25.810 --> 00:05:27.360
exit players are recommended way of
integrating at the moment because it

00:05:27.360 --> 00:05:27.370
integrating at the moment because it
 

00:05:27.370 --> 00:05:29.189
integrating at the moment because it
provides it does lots of things for you

00:05:29.189 --> 00:05:29.199
provides it does lots of things for you
 

00:05:29.199 --> 00:05:31.110
provides it does lots of things for you
for example handling the lifecycle of

00:05:31.110 --> 00:05:31.120
for example handling the lifecycle of
 

00:05:31.120 --> 00:05:34.170
for example handling the lifecycle of
the surface holder for video output you

00:05:34.170 --> 00:05:34.180
the surface holder for video output you
 

00:05:34.180 --> 00:05:35.969
the surface holder for video output you
can see also that we're passing in as

00:05:35.969 --> 00:05:35.979
can see also that we're passing in as
 

00:05:35.979 --> 00:05:37.709
can see also that we're passing in as
well as a context a track selector

00:05:37.709 --> 00:05:37.719
well as a context a track selector
 

00:05:37.719 --> 00:05:39.899
well as a context a track selector
implementation in this example we're

00:05:39.899 --> 00:05:39.909
implementation in this example we're
 

00:05:39.909 --> 00:05:41.339
implementation in this example we're
going to use a default track selector

00:05:41.339 --> 00:05:41.349
going to use a default track selector
 

00:05:41.349 --> 00:05:43.230
going to use a default track selector
but this is an example of a pattern

00:05:43.230 --> 00:05:43.240
but this is an example of a pattern
 

00:05:43.240 --> 00:05:45.120
but this is an example of a pattern
which is very common in EXO players API

00:05:45.120 --> 00:05:45.130
which is very common in EXO players API
 

00:05:45.130 --> 00:05:47.219
which is very common in EXO players API
where you pass in a dependency of a

00:05:47.219 --> 00:05:47.229
where you pass in a dependency of a
 

00:05:47.229 --> 00:05:51.240
where you pass in a dependency of a
component in this case we're passing in

00:05:51.240 --> 00:05:51.250
component in this case we're passing in
 

00:05:51.250 --> 00:05:52.589
component in this case we're passing in
a default track selector but you could

00:05:52.589 --> 00:05:52.599
a default track selector but you could
 

00:05:52.599 --> 00:05:53.939
a default track selector but you could
pass in your own track selector

00:05:53.939 --> 00:05:53.949
pass in your own track selector
 

00:05:53.949 --> 00:05:55.409
pass in your own track selector
implementation if you wanted to have

00:05:55.409 --> 00:05:55.419
implementation if you wanted to have
 

00:05:55.419 --> 00:05:56.879
implementation if you wanted to have
much more control over how track

00:05:56.879 --> 00:05:56.889
much more control over how track
 

00:05:56.889 --> 00:05:59.490
much more control over how track
selections working so Mark's already

00:05:59.490 --> 00:05:59.500
selections working so Mark's already
 

00:05:59.500 --> 00:06:01.350
selections working so Mark's already
gone ahead and he's bound the player to

00:06:01.350 --> 00:06:01.360
gone ahead and he's bound the player to
 

00:06:01.360 --> 00:06:03.089
gone ahead and he's bound the player to
the player view so that their players

00:06:03.089 --> 00:06:03.099
the player view so that their players
 

00:06:03.099 --> 00:06:04.170
the player view so that their players
output is going to appear in that

00:06:04.170 --> 00:06:04.180
output is going to appear in that
 

00:06:04.180 --> 00:06:08.339
output is going to appear in that
particular view ok so the next step is

00:06:08.339 --> 00:06:08.349
particular view ok so the next step is
 

00:06:08.349 --> 00:06:10.230
particular view ok so the next step is
to tell exoplayer what we want to play

00:06:10.230 --> 00:06:10.240
to tell exoplayer what we want to play
 

00:06:10.240 --> 00:06:12.059
to tell exoplayer what we want to play
and for that there are really two parts

00:06:12.059 --> 00:06:12.069
and for that there are really two parts
 

00:06:12.069 --> 00:06:14.700
and for that there are really two parts
the first one is to provide a factory

00:06:14.700 --> 00:06:14.710
the first one is to provide a factory
 

00:06:14.710 --> 00:06:17.580
the first one is to provide a factory
for data sources data sources tell

00:06:17.580 --> 00:06:17.590
for data sources data sources tell
 

00:06:17.590 --> 00:06:19.860
for data sources data sources tell
exoplayer how to load data for example

00:06:19.860 --> 00:06:19.870
exoplayer how to load data for example
 

00:06:19.870 --> 00:06:22.559
exoplayer how to load data for example
using a particular HTTP stack or loading

00:06:22.559 --> 00:06:22.569
using a particular HTTP stack or loading
 

00:06:22.569 --> 00:06:24.719
using a particular HTTP stack or loading
files from the local device in this

00:06:24.719 --> 00:06:24.729
files from the local device in this
 

00:06:24.729 --> 00:06:26.430
files from the local device in this
example we're using a default data

00:06:26.430 --> 00:06:26.440
example we're using a default data
 

00:06:26.440 --> 00:06:28.290
example we're using a default data
source which is suitable for many use

00:06:28.290 --> 00:06:28.300
source which is suitable for many use
 

00:06:28.300 --> 00:06:31.920
source which is suitable for many use
cases it provides loading for HTTP URLs

00:06:31.920 --> 00:06:31.930
cases it provides loading for HTTP URLs
 

00:06:31.930 --> 00:06:35.309
cases it provides loading for HTTP URLs
files from the local disk assets and

00:06:35.309 --> 00:06:35.319
files from the local disk assets and
 

00:06:35.319 --> 00:06:37.139
files from the local disk assets and
resources bundled into your apk and so

00:06:37.139 --> 00:06:37.149
resources bundled into your apk and so
 

00:06:37.149 --> 00:06:39.389
resources bundled into your apk and so
on but if you wanted to for example use

00:06:39.389 --> 00:06:39.399
on but if you wanted to for example use
 

00:06:39.399 --> 00:06:40.950
on but if you wanted to for example use
the chromium Network stack

00:06:40.950 --> 00:06:40.960
the chromium Network stack
 

00:06:40.960 --> 00:06:42.570
the chromium Network stack
then you could use a cronut datasource

00:06:42.570 --> 00:06:42.580
then you could use a cronut datasource
 

00:06:42.580 --> 00:06:45.870
then you could use a cronut datasource
Factory okay so that's the first part of

00:06:45.870 --> 00:06:45.880
Factory okay so that's the first part of
 

00:06:45.880 --> 00:06:47.820
Factory okay so that's the first part of
telling exoplayer what to load the next

00:06:47.820 --> 00:06:47.830
telling exoplayer what to load the next
 

00:06:47.830 --> 00:06:50.279
telling exoplayer what to load the next
part is specifying a media source your

00:06:50.279 --> 00:06:50.289
part is specifying a media source your
 

00:06:50.289 --> 00:06:51.839
part is specifying a media source your
choice of media source is going to

00:06:51.839 --> 00:06:51.849
choice of media source is going to
 

00:06:51.849 --> 00:06:53.339
choice of media source is going to
depend on the type of media you're

00:06:53.339 --> 00:06:53.349
depend on the type of media you're
 

00:06:53.349 --> 00:06:55.680
depend on the type of media you're
trying to play in this example we're

00:06:55.680 --> 00:06:55.690
trying to play in this example we're
 

00:06:55.690 --> 00:06:57.420
trying to play in this example we're
going to be playing an mp4 so we're

00:06:57.420 --> 00:06:57.430
going to be playing an mp4 so we're
 

00:06:57.430 --> 00:06:58.890
going to be playing an mp4 so we're
going to use an extractor media source

00:06:58.890 --> 00:06:58.900
going to use an extractor media source
 

00:06:58.900 --> 00:07:01.620
going to use an extractor media source
which supports formats like mp4 mp3

00:07:01.620 --> 00:07:01.630
which supports formats like mp4 mp3
 

00:07:01.630 --> 00:07:04.499
which supports formats like mp4 mp3
Matroska and so on if you wanted to play

00:07:04.499 --> 00:07:04.509
Matroska and so on if you wanted to play
 

00:07:04.509 --> 00:07:07.469
Matroska and so on if you wanted to play
- or HLS or smooth streaming streams

00:07:07.469 --> 00:07:07.479
- or HLS or smooth streaming streams
 

00:07:07.479 --> 00:07:09.300
- or HLS or smooth streaming streams
then you would use the corresponding

00:07:09.300 --> 00:07:09.310
then you would use the corresponding
 

00:07:09.310 --> 00:07:10.650
then you would use the corresponding
media sources for those different

00:07:10.650 --> 00:07:10.660
media sources for those different
 

00:07:10.660 --> 00:07:13.379
media sources for those different
formats and you can see that marks

00:07:13.379 --> 00:07:13.389
formats and you can see that marks
 

00:07:13.389 --> 00:07:15.719
formats and you can see that marks
passing in the URI thar mp4 when he's

00:07:15.719 --> 00:07:15.729
passing in the URI thar mp4 when he's
 

00:07:15.729 --> 00:07:18.900
passing in the URI thar mp4 when he's
creating the media source okay once

00:07:18.900 --> 00:07:18.910
creating the media source okay once
 

00:07:18.910 --> 00:07:20.430
creating the media source okay once
we've got our media source now we just

00:07:20.430 --> 00:07:20.440
we've got our media source now we just
 

00:07:20.440 --> 00:07:22.230
we've got our media source now we just
need to prepare the player to start

00:07:22.230 --> 00:07:22.240
need to prepare the player to start
 

00:07:22.240 --> 00:07:23.850
need to prepare the player to start
offering data so we'll pass that to the

00:07:23.850 --> 00:07:23.860
offering data so we'll pass that to the
 

00:07:23.860 --> 00:07:26.640
offering data so we'll pass that to the
prepare method then we're going to call

00:07:26.640 --> 00:07:26.650
prepare method then we're going to call
 

00:07:26.650 --> 00:07:28.589
prepare method then we're going to call
set play when ready to tell the player

00:07:28.589 --> 00:07:28.599
set play when ready to tell the player
 

00:07:28.599 --> 00:07:30.300
set play when ready to tell the player
that as soon as it transitions from the

00:07:30.300 --> 00:07:30.310
that as soon as it transitions from the
 

00:07:30.310 --> 00:07:32.430
that as soon as it transitions from the
buffering state to the ready state then

00:07:32.430 --> 00:07:32.440
buffering state to the ready state then
 

00:07:32.440 --> 00:07:34.249
buffering state to the ready state then
playback should begin automatically

00:07:34.249 --> 00:07:34.259
playback should begin automatically
 

00:07:34.259 --> 00:07:36.570
playback should begin automatically
having done that all that remains is to

00:07:36.570 --> 00:07:36.580
having done that all that remains is to
 

00:07:36.580 --> 00:07:39.390
having done that all that remains is to
clean up when the activity goes into the

00:07:39.390 --> 00:07:39.400
clean up when the activity goes into the
 

00:07:39.400 --> 00:07:41.219
clean up when the activity goes into the
background so we'll override on destroy

00:07:41.219 --> 00:07:41.229
background so we'll override on destroy
 

00:07:41.229 --> 00:07:46.350
background so we'll override on destroy
sorry on stop okay and in that we're

00:07:46.350 --> 00:07:46.360
sorry on stop okay and in that we're
 

00:07:46.360 --> 00:07:47.879
sorry on stop okay and in that we're
going to clear the player reference on

00:07:47.879 --> 00:07:47.889
going to clear the player reference on
 

00:07:47.889 --> 00:07:50.550
going to clear the player reference on
the player view and then we're going to

00:07:50.550 --> 00:07:50.560
the player view and then we're going to
 

00:07:50.560 --> 00:07:55.469
the player view and then we're going to
release the player okay and this is kind

00:07:55.469 --> 00:07:55.479
release the player okay and this is kind
 

00:07:55.479 --> 00:07:57.300
release the player okay and this is kind
of the the minimum code you need just to

00:07:57.300 --> 00:07:57.310
of the the minimum code you need just to
 

00:07:57.310 --> 00:07:59.820
of the the minimum code you need just to
play a video stream let's go ahead and

00:07:59.820 --> 00:07:59.830
play a video stream let's go ahead and
 

00:07:59.830 --> 00:08:02.490
play a video stream let's go ahead and
deploy that to the device now and if we

00:08:02.490 --> 00:08:02.500
deploy that to the device now and if we
 

00:08:02.500 --> 00:08:04.249
deploy that to the device now and if we
could switch to the phone please

00:08:04.249 --> 00:08:04.259
could switch to the phone please
 

00:08:04.259 --> 00:08:05.820
could switch to the phone please
hopefully you haven't missed out

00:08:05.820 --> 00:08:05.830
hopefully you haven't missed out
 

00:08:05.830 --> 00:08:09.600
hopefully you haven't missed out
anything so when when the applications

00:08:09.600 --> 00:08:09.610
anything so when when the applications
 

00:08:09.610 --> 00:08:11.700
anything so when when the applications
been installed on the voice the device

00:08:11.700 --> 00:08:11.710
been installed on the voice the device
 

00:08:11.710 --> 00:08:13.469
been installed on the voice the device
you should see the video starts to play

00:08:13.469 --> 00:08:13.479
you should see the video starts to play
 

00:08:13.479 --> 00:08:17.550
you should see the video starts to play
automatically and you can see that if

00:08:17.550 --> 00:08:17.560
automatically and you can see that if
 

00:08:17.560 --> 00:08:19.469
automatically and you can see that if
you tap on the video views you get so

00:08:19.469 --> 00:08:19.479
you tap on the video views you get so
 

00:08:19.479 --> 00:08:21.740
you tap on the video views you get so
normal devices simple playback controls

00:08:21.740 --> 00:08:21.750
normal devices simple playback controls
 

00:08:21.750 --> 00:08:23.909
normal devices simple playback controls
pretty much what you'd expect from a

00:08:23.909 --> 00:08:23.919
pretty much what you'd expect from a
 

00:08:23.919 --> 00:08:25.439
pretty much what you'd expect from a
video player up so you can pause and

00:08:25.439 --> 00:08:25.449
video player up so you can pause and
 

00:08:25.449 --> 00:08:28.850
video player up so you can pause and
resume you can seek around and so on

00:08:28.850 --> 00:08:28.860
resume you can seek around and so on
 

00:08:28.860 --> 00:08:34.199
resume you can seek around and so on
okay let's let's now switch back to the

00:08:34.199 --> 00:08:34.209
okay let's let's now switch back to the
 

00:08:34.209 --> 00:08:37.469
okay let's let's now switch back to the
laptop please so let's imagine we've

00:08:37.469 --> 00:08:37.479
laptop please so let's imagine we've
 

00:08:37.479 --> 00:08:40.290
laptop please so let's imagine we've
launched our video app and if you switch

00:08:40.290 --> 00:08:40.300
launched our video app and if you switch
 

00:08:40.300 --> 00:08:42.480
launched our video app and if you switch
to the laptop please we've launched our

00:08:42.480 --> 00:08:42.490
to the laptop please we've launched our
 

00:08:42.490 --> 00:08:43.769
to the laptop please we've launched our
video app and now we'd like to think

00:08:43.769 --> 00:08:43.779
video app and now we'd like to think
 

00:08:43.779 --> 00:08:45.930
video app and now we'd like to think
about how we're going to monetize our

00:08:45.930 --> 00:08:45.940
about how we're going to monetize our
 

00:08:45.940 --> 00:08:48.810
about how we're going to monetize our
content by showing ads this is extremely

00:08:48.810 --> 00:08:48.820
content by showing ads this is extremely
 

00:08:48.820 --> 00:08:51.090
content by showing ads this is extremely
easy to do with exoplayer we've recently

00:08:51.090 --> 00:08:51.100
easy to do with exoplayer we've recently
 

00:08:51.100 --> 00:08:54.240
easy to do with exoplayer we've recently
added an IMA extension which makes this

00:08:54.240 --> 00:08:54.250
added an IMA extension which makes this
 

00:08:54.250 --> 00:08:55.220
added an IMA extension which makes this
very easy

00:08:55.220 --> 00:08:55.230
very easy
 

00:08:55.230 --> 00:08:57.620
very easy
so exoplayer extensions are wrappers

00:08:57.620 --> 00:08:57.630
so exoplayer extensions are wrappers
 

00:08:57.630 --> 00:08:59.900
so exoplayer extensions are wrappers
around external functionality that make

00:08:59.900 --> 00:08:59.910
around external functionality that make
 

00:08:59.910 --> 00:09:01.880
around external functionality that make
it very easy to use with exoplayer in

00:09:01.880 --> 00:09:01.890
it very easy to use with exoplayer in
 

00:09:01.890 --> 00:09:05.300
it very easy to use with exoplayer in
this case the IMA extension is a wrapper

00:09:05.300 --> 00:09:05.310
this case the IMA extension is a wrapper
 

00:09:05.310 --> 00:09:07.310
this case the IMA extension is a wrapper
around the interactive media ads SDK

00:09:07.310 --> 00:09:07.320
around the interactive media ads SDK
 

00:09:07.320 --> 00:09:10.220
around the interactive media ads SDK
which provides support for loading XML

00:09:10.220 --> 00:09:10.230
which provides support for loading XML
 

00:09:10.230 --> 00:09:12.560
which provides support for loading XML
add tags in vast and V map formats which

00:09:12.560 --> 00:09:12.570
add tags in vast and V map formats which
 

00:09:12.570 --> 00:09:14.570
add tags in vast and V map formats which
is a standard format for information

00:09:14.570 --> 00:09:14.580
is a standard format for information
 

00:09:14.580 --> 00:09:17.420
is a standard format for information
about ads so we're going to be using

00:09:17.420 --> 00:09:17.430
about ads so we're going to be using
 

00:09:17.430 --> 00:09:18.650
about ads so we're going to be using
that to load ads and then we're going to

00:09:18.650 --> 00:09:18.660
that to load ads and then we're going to
 

00:09:18.660 --> 00:09:20.540
that to load ads and then we're going to
insert it with it within the content in

00:09:20.540 --> 00:09:20.550
insert it with it within the content in
 

00:09:20.550 --> 00:09:23.840
insert it with it within the content in
our player so we're going to create a

00:09:23.840 --> 00:09:23.850
our player so we're going to create a
 

00:09:23.850 --> 00:09:26.540
our player so we're going to create a
ads loader which is a we're going to use

00:09:26.540 --> 00:09:26.550
ads loader which is a we're going to use
 

00:09:26.550 --> 00:09:28.490
ads loader which is a we're going to use
an ima ads loader which is the object

00:09:28.490 --> 00:09:28.500
an ima ads loader which is the object
 

00:09:28.500 --> 00:09:30.410
an ima ads loader which is the object
that's provided by the IMA extension

00:09:30.410 --> 00:09:30.420
that's provided by the IMA extension
 

00:09:30.420 --> 00:09:33.590
that's provided by the IMA extension
this is going to take the context and an

00:09:33.590 --> 00:09:33.600
this is going to take the context and an
 

00:09:33.600 --> 00:09:36.020
this is going to take the context and an
ad tag URI which is the URI of an XML

00:09:36.020 --> 00:09:36.030
ad tag URI which is the URI of an XML
 

00:09:36.030 --> 00:09:37.850
ad tag URI which is the URI of an XML
document specifying what ads to play

00:09:37.850 --> 00:09:37.860
document specifying what ads to play
 

00:09:37.860 --> 00:09:39.830
document specifying what ads to play
we're in the content so we're going to

00:09:39.830 --> 00:09:39.840
we're in the content so we're going to
 

00:09:39.840 --> 00:09:41.510
we're in the content so we're going to
create that ads loader in oncreate and

00:09:41.510 --> 00:09:41.520
create that ads loader in oncreate and
 

00:09:41.520 --> 00:09:43.010
create that ads loader in oncreate and
then we're going to release it in on

00:09:43.010 --> 00:09:43.020
then we're going to release it in on
 

00:09:43.020 --> 00:09:45.380
then we're going to release it in on
destroy the reason we're using on create

00:09:45.380 --> 00:09:45.390
destroy the reason we're using on create
 

00:09:45.390 --> 00:09:47.570
destroy the reason we're using on create
and on destroy is that that ads loader

00:09:47.570 --> 00:09:47.580
and on destroy is that that ads loader
 

00:09:47.580 --> 00:09:49.820
and on destroy is that that ads loader
contains information about which ads

00:09:49.820 --> 00:09:49.830
contains information about which ads
 

00:09:49.830 --> 00:09:51.920
contains information about which ads
have already been played so we want to

00:09:51.920 --> 00:09:51.930
have already been played so we want to
 

00:09:51.930 --> 00:09:53.210
have already been played so we want to
make sure that if the app goes into the

00:09:53.210 --> 00:09:53.220
make sure that if the app goes into the
 

00:09:53.220 --> 00:09:54.410
make sure that if the app goes into the
background and comes back into the

00:09:54.410 --> 00:09:54.420
background and comes back into the
 

00:09:54.420 --> 00:09:55.760
background and comes back into the
foreground we don't show the same ads

00:09:55.760 --> 00:09:55.770
foreground we don't show the same ads
 

00:09:55.770 --> 00:09:59.690
foreground we don't show the same ads
multiple times okay and as I mentioned

00:09:59.690 --> 00:09:59.700
multiple times okay and as I mentioned
 

00:09:59.700 --> 00:10:01.400
multiple times okay and as I mentioned
before media sources are how we tell

00:10:01.400 --> 00:10:01.410
before media sources are how we tell
 

00:10:01.410 --> 00:10:03.440
before media sources are how we tell
exoplayer what to play and in order to

00:10:03.440 --> 00:10:03.450
exoplayer what to play and in order to
 

00:10:03.450 --> 00:10:05.540
exoplayer what to play and in order to
play ads we use the predictably named

00:10:05.540 --> 00:10:05.550
play ads we use the predictably named
 

00:10:05.550 --> 00:10:07.910
play ads we use the predictably named
ads media source so we're going to

00:10:07.910 --> 00:10:07.920
ads media source so we're going to
 

00:10:07.920 --> 00:10:09.950
ads media source so we're going to
create an ads media source we'll pass in

00:10:09.950 --> 00:10:09.960
create an ads media source we'll pass in
 

00:10:09.960 --> 00:10:11.450
create an ads media source we'll pass in
the content media source that we want to

00:10:11.450 --> 00:10:11.460
the content media source that we want to
 

00:10:11.460 --> 00:10:13.700
the content media source that we want to
play we'll pass in a data source factory

00:10:13.700 --> 00:10:13.710
play we'll pass in a data source factory
 

00:10:13.710 --> 00:10:15.080
play we'll pass in a data source factory
which is going to be used to load data

00:10:15.080 --> 00:10:15.090
which is going to be used to load data
 

00:10:15.090 --> 00:10:17.360
which is going to be used to load data
for playing the ads we'll fast in the

00:10:17.360 --> 00:10:17.370
for playing the ads we'll fast in the
 

00:10:17.370 --> 00:10:19.580
for playing the ads we'll fast in the
ads loader and finally we'll pass in a

00:10:19.580 --> 00:10:19.590
ads loader and finally we'll pass in a
 

00:10:19.590 --> 00:10:21.320
ads loader and finally we'll pass in a
view group that's on top of the player

00:10:21.320 --> 00:10:21.330
view group that's on top of the player
 

00:10:21.330 --> 00:10:23.210
view group that's on top of the player
and that's going to be used to show any

00:10:23.210 --> 00:10:23.220
and that's going to be used to show any
 

00:10:23.220 --> 00:10:25.520
and that's going to be used to show any
user interface associated with ads like

00:10:25.520 --> 00:10:25.530
user interface associated with ads like
 

00:10:25.530 --> 00:10:29.210
user interface associated with ads like
for example the skip button and building

00:10:29.210 --> 00:10:29.220
for example the skip button and building
 

00:10:29.220 --> 00:10:30.890
for example the skip button and building
an ads media source out of a content

00:10:30.890 --> 00:10:30.900
an ads media source out of a content
 

00:10:30.900 --> 00:10:32.810
an ads media source out of a content
media source like this is an example of

00:10:32.810 --> 00:10:32.820
media source like this is an example of
 

00:10:32.820 --> 00:10:34.910
media source like this is an example of
media source composition and this is

00:10:34.910 --> 00:10:34.920
media source composition and this is
 

00:10:34.920 --> 00:10:36.320
media source composition and this is
something that you can do with exoplayer

00:10:36.320 --> 00:10:36.330
something that you can do with exoplayer
 

00:10:36.330 --> 00:10:38.210
something that you can do with exoplayer
and we'll see some more examples of it

00:10:38.210 --> 00:10:38.220
and we'll see some more examples of it
 

00:10:38.220 --> 00:10:41.660
and we'll see some more examples of it
later when we look at playlists okay so

00:10:41.660 --> 00:10:41.670
later when we look at playlists okay so
 

00:10:41.670 --> 00:10:43.460
later when we look at playlists okay so
we refer the player with the ads media

00:10:43.460 --> 00:10:43.470
we refer the player with the ads media
 

00:10:43.470 --> 00:10:46.600
we refer the player with the ads media
source and then we should be good to go

00:10:46.600 --> 00:10:46.610
source and then we should be good to go
 

00:10:46.610 --> 00:10:49.130
source and then we should be good to go
so you can see we've hopefully hopefully

00:10:49.130 --> 00:10:49.140
so you can see we've hopefully hopefully
 

00:10:49.140 --> 00:10:49.700
so you can see we've hopefully hopefully
this will work

00:10:49.700 --> 00:10:49.710
this will work
 

00:10:49.710 --> 00:10:53.360
this will work
if we can switch to the phone we were

00:10:53.360 --> 00:10:53.370
if we can switch to the phone we were
 

00:10:53.370 --> 00:10:55.640
if we can switch to the phone we were
able to add support for playing ads with

00:10:55.640 --> 00:10:55.650
able to add support for playing ads with
 

00:10:55.650 --> 00:10:57.710
able to add support for playing ads with
maybe 10 or so lines of code and

00:10:57.710 --> 00:10:57.720
maybe 10 or so lines of code and
 

00:10:57.720 --> 00:10:59.390
maybe 10 or so lines of code and
actually this this way of integrating

00:10:59.390 --> 00:10:59.400
actually this this way of integrating
 

00:10:59.400 --> 00:11:02.750
actually this this way of integrating
the IMA SDK gives a really good user

00:11:02.750 --> 00:11:02.760
the IMA SDK gives a really good user
 

00:11:02.760 --> 00:11:04.310
the IMA SDK gives a really good user
experience because exoplayer

00:11:04.310 --> 00:11:04.320
experience because exoplayer
 

00:11:04.320 --> 00:11:07.550
experience because exoplayer
knows about which ads are coming up in

00:11:07.550 --> 00:11:07.560
knows about which ads are coming up in
 

00:11:07.560 --> 00:11:08.660
knows about which ads are coming up in
the future

00:11:08.660 --> 00:11:08.670
the future
 

00:11:08.670 --> 00:11:10.010
the future
and that means that it's going to be

00:11:10.010 --> 00:11:10.020
and that means that it's going to be
 

00:11:10.020 --> 00:11:11.540
and that means that it's going to be
able to buffer the content in advance

00:11:11.540 --> 00:11:11.550
able to buffer the content in advance
 

00:11:11.550 --> 00:11:13.160
able to buffer the content in advance
and that adds it can buffer their ads in

00:11:13.160 --> 00:11:13.170
and that adds it can buffer their ads in
 

00:11:13.170 --> 00:11:14.900
and that adds it can buffer their ads in
advance to give you seamless transitions

00:11:14.900 --> 00:11:14.910
advance to give you seamless transitions
 

00:11:14.910 --> 00:11:18.200
advance to give you seamless transitions
between ads and content so as you saw we

00:11:18.200 --> 00:11:18.210
between ads and content so as you saw we
 

00:11:18.210 --> 00:11:19.850
between ads and content so as you saw we
had a pre-roll ad at the beginning and

00:11:19.850 --> 00:11:19.860
had a pre-roll ad at the beginning and
 

00:11:19.860 --> 00:11:22.040
had a pre-roll ad at the beginning and
now the time bar has little yellow

00:11:22.040 --> 00:11:22.050
now the time bar has little yellow
 

00:11:22.050 --> 00:11:24.080
now the time bar has little yellow
markers it's just showing us their

00:11:24.080 --> 00:11:24.090
markers it's just showing us their
 

00:11:24.090 --> 00:11:25.990
markers it's just showing us their
positions of ads within the content and

00:11:25.990 --> 00:11:26.000
positions of ads within the content and
 

00:11:26.000 --> 00:11:28.130
positions of ads within the content and
exoplayer is taking care of all of the

00:11:28.130 --> 00:11:28.140
exoplayer is taking care of all of the
 

00:11:28.140 --> 00:11:30.530
exoplayer is taking care of all of the
difficulty of loading the ads and

00:11:30.530 --> 00:11:30.540
difficulty of loading the ads and
 

00:11:30.540 --> 00:11:31.910
difficulty of loading the ads and
buffering everything behind the scenes

00:11:31.910 --> 00:11:31.920
buffering everything behind the scenes
 

00:11:31.920 --> 00:11:35.360
buffering everything behind the scenes
for us okay so that's I'll play back and

00:11:35.360 --> 00:11:35.370
for us okay so that's I'll play back and
 

00:11:35.370 --> 00:11:37.190
for us okay so that's I'll play back and
now over some arcs to talk a bit about

00:11:37.190 --> 00:11:37.200
now over some arcs to talk a bit about
 

00:11:37.200 --> 00:11:40.400
now over some arcs to talk a bit about
audio yeah thank you Andrew so far we

00:11:40.400 --> 00:11:40.410
audio yeah thank you Andrew so far we
 

00:11:40.410 --> 00:11:43.130
audio yeah thank you Andrew so far we
focus on video only so let's switch to

00:11:43.130 --> 00:11:43.140
focus on video only so let's switch to
 

00:11:43.140 --> 00:11:44.660
focus on video only so let's switch to
another application and look a little

00:11:44.660 --> 00:11:44.670
another application and look a little
 

00:11:44.670 --> 00:11:47.270
another application and look a little
bit into audio playback audio playback

00:11:47.270 --> 00:11:47.280
bit into audio playback audio playback
 

00:11:47.280 --> 00:11:49.490
bit into audio playback audio playback
is a little bit more challenging because

00:11:49.490 --> 00:11:49.500
is a little bit more challenging because
 

00:11:49.500 --> 00:11:51.740
is a little bit more challenging because
we want to enable the user to put our

00:11:51.740 --> 00:11:51.750
we want to enable the user to put our
 

00:11:51.750 --> 00:11:53.600
we want to enable the user to put our
application into the background and use

00:11:53.600 --> 00:11:53.610
application into the background and use
 

00:11:53.610 --> 00:11:55.640
application into the background and use
another application and audio should

00:11:55.640 --> 00:11:55.650
another application and audio should
 

00:11:55.650 --> 00:11:58.580
another application and audio should
still keep playing in the background for

00:11:58.580 --> 00:11:58.590
still keep playing in the background for
 

00:11:58.590 --> 00:12:00.620
still keep playing in the background for
this we are going to use the so called

00:12:00.620 --> 00:12:00.630
this we are going to use the so called
 

00:12:00.630 --> 00:12:02.510
this we are going to use the so called
foreground service it's called a

00:12:02.510 --> 00:12:02.520
foreground service it's called a
 

00:12:02.520 --> 00:12:04.310
foreground service it's called a
foreground service because we need to

00:12:04.310 --> 00:12:04.320
foreground service because we need to
 

00:12:04.320 --> 00:12:06.530
foreground service because we need to
attach a notification to this service

00:12:06.530 --> 00:12:06.540
attach a notification to this service
 

00:12:06.540 --> 00:12:08.450
attach a notification to this service
and this notification is in the

00:12:08.450 --> 00:12:08.460
and this notification is in the
 

00:12:08.460 --> 00:12:10.370
and this notification is in the
foreground it's visible to the user so

00:12:10.370 --> 00:12:10.380
foreground it's visible to the user so
 

00:12:10.380 --> 00:12:12.440
foreground it's visible to the user so
the user is always aware we are doing

00:12:12.440 --> 00:12:12.450
the user is always aware we are doing
 

00:12:12.450 --> 00:12:14.110
the user is always aware we are doing
some work in the background

00:12:14.110 --> 00:12:14.120
some work in the background
 

00:12:14.120 --> 00:12:17.060
some work in the background
since Oreo such a know such a foreground

00:12:17.060 --> 00:12:17.070
since Oreo such a know such a foreground
 

00:12:17.070 --> 00:12:19.220
since Oreo such a know such a foreground
service is a mandatory requirement if we

00:12:19.220 --> 00:12:19.230
service is a mandatory requirement if we
 

00:12:19.230 --> 00:12:20.780
service is a mandatory requirement if we
don't put our service into the

00:12:20.780 --> 00:12:20.790
don't put our service into the
 

00:12:20.790 --> 00:12:22.580
don't put our service into the
foreground the system will kill our

00:12:22.580 --> 00:12:22.590
foreground the system will kill our
 

00:12:22.590 --> 00:12:25.820
foreground the system will kill our
service and the application crashes so

00:12:25.820 --> 00:12:25.830
service and the application crashes so
 

00:12:25.830 --> 00:12:27.920
service and the application crashes so
let's have a look at the starting point

00:12:27.920 --> 00:12:27.930
let's have a look at the starting point
 

00:12:27.930 --> 00:12:30.320
let's have a look at the starting point
of our foreground service and let's

00:12:30.320 --> 00:12:30.330
of our foreground service and let's
 

00:12:30.330 --> 00:12:33.170
of our foreground service and let's
switch back to the laptop please yes we

00:12:33.170 --> 00:12:33.180
switch back to the laptop please yes we
 

00:12:33.180 --> 00:12:35.630
switch back to the laptop please yes we
see here we have this audio player

00:12:35.630 --> 00:12:35.640
see here we have this audio player
 

00:12:35.640 --> 00:12:37.880
see here we have this audio player
service which extends from the service

00:12:37.880 --> 00:12:37.890
service which extends from the service
 

00:12:37.890 --> 00:12:40.670
service which extends from the service
we have already overridden the oncreate

00:12:40.670 --> 00:12:40.680
we have already overridden the oncreate
 

00:12:40.680 --> 00:12:43.100
we have already overridden the oncreate
method where we put the code from our

00:12:43.100 --> 00:12:43.110
method where we put the code from our
 

00:12:43.110 --> 00:12:45.260
method where we put the code from our
video sample where we initialize and

00:12:45.260 --> 00:12:45.270
video sample where we initialize and
 

00:12:45.270 --> 00:12:47.480
video sample where we initialize and
prepare the player with a single media

00:12:47.480 --> 00:12:47.490
prepare the player with a single media
 

00:12:47.490 --> 00:12:49.850
prepare the player with a single media
item in only stroy will release our

00:12:49.850 --> 00:12:49.860
item in only stroy will release our
 

00:12:49.860 --> 00:12:52.340
item in only stroy will release our
resources and finally in own stored

00:12:52.340 --> 00:12:52.350
resources and finally in own stored
 

00:12:52.350 --> 00:12:55.580
resources and finally in own stored
commands we return step start sticky so

00:12:55.580 --> 00:12:55.590
commands we return step start sticky so
 

00:12:55.590 --> 00:12:57.530
commands we return step start sticky so
the service is not immediately destroyed

00:12:57.530 --> 00:12:57.540
the service is not immediately destroyed
 

00:12:57.540 --> 00:12:59.660
the service is not immediately destroyed
and we can explicitly terminate our

00:12:59.660 --> 00:12:59.670
and we can explicitly terminate our
 

00:12:59.670 --> 00:13:02.690
and we can explicitly terminate our
service when we are ready when we are

00:13:02.690 --> 00:13:02.700
service when we are ready when we are
 

00:13:02.700 --> 00:13:06.020
service when we are ready when we are
finished with audio playback the service

00:13:06.020 --> 00:13:06.030
finished with audio playback the service
 

00:13:06.030 --> 00:13:08.270
finished with audio playback the service
also already registered in the manifest

00:13:08.270 --> 00:13:08.280
also already registered in the manifest
 

00:13:08.280 --> 00:13:10.430
also already registered in the manifest
we have this simple service element

00:13:10.430 --> 00:13:10.440
we have this simple service element
 

00:13:10.440 --> 00:13:12.710
we have this simple service element
which just points to our audio player

00:13:12.710 --> 00:13:12.720
which just points to our audio player
 

00:13:12.720 --> 00:13:15.530
which just points to our audio player
service clause and finally we need to

00:13:15.530 --> 00:13:15.540
service clause and finally we need to
 

00:13:15.540 --> 00:13:18.710
service clause and finally we need to
have a way to store our service we do

00:13:18.710 --> 00:13:18.720
have a way to store our service we do
 

00:13:18.720 --> 00:13:20.540
have a way to store our service we do
this in the main activity in the own

00:13:20.540 --> 00:13:20.550
this in the main activity in the own
 

00:13:20.550 --> 00:13:21.630
this in the main activity in the own
create method

00:13:21.630 --> 00:13:21.640
create method
 

00:13:21.640 --> 00:13:24.270
create method
of the mainactivity here we create an

00:13:24.270 --> 00:13:24.280
of the mainactivity here we create an
 

00:13:24.280 --> 00:13:26.340
of the mainactivity here we create an
intent pointing to our audio player

00:13:26.340 --> 00:13:26.350
intent pointing to our audio player
 

00:13:26.350 --> 00:13:29.340
intent pointing to our audio player
service and then we use a static method

00:13:29.340 --> 00:13:29.350
service and then we use a static method
 

00:13:29.350 --> 00:13:31.620
service and then we use a static method
of the exoplayer library which starts

00:13:31.620 --> 00:13:31.630
of the exoplayer library which starts
 

00:13:31.630 --> 00:13:33.660
of the exoplayer library which starts
the service in foreground according to

00:13:33.660 --> 00:13:33.670
the service in foreground according to
 

00:13:33.670 --> 00:13:38.160
the service in foreground according to
the to the API level so now let's go

00:13:38.160 --> 00:13:38.170
the to the API level so now let's go
 

00:13:38.170 --> 00:13:41.460
the to the API level so now let's go
back into the audio player service again

00:13:41.460 --> 00:13:41.470
back into the audio player service again
 

00:13:41.470 --> 00:13:43.260
back into the audio player service again
and let's change this code a little bit

00:13:43.260 --> 00:13:43.270
and let's change this code a little bit
 

00:13:43.270 --> 00:13:46.230
and let's change this code a little bit
of the very initialize our player

00:13:46.230 --> 00:13:46.240
of the very initialize our player
 

00:13:46.240 --> 00:13:48.660
of the very initialize our player
because for audio we don't want to only

00:13:48.660 --> 00:13:48.670
because for audio we don't want to only
 

00:13:48.670 --> 00:13:51.240
because for audio we don't want to only
support playing a single media item we

00:13:51.240 --> 00:13:51.250
support playing a single media item we
 

00:13:51.250 --> 00:13:53.100
support playing a single media item we
want to support playlists so the user

00:13:53.100 --> 00:13:53.110
want to support playlists so the user
 

00:13:53.110 --> 00:13:55.860
want to support playlists so the user
can can move to the next or to the

00:13:55.860 --> 00:13:55.870
can can move to the next or to the
 

00:13:55.870 --> 00:13:58.020
can can move to the next or to the
previous item Oh can't just let the

00:13:58.020 --> 00:13:58.030
previous item Oh can't just let the
 

00:13:58.030 --> 00:14:00.650
previous item Oh can't just let the
players play one item after the other

00:14:00.650 --> 00:14:00.660
players play one item after the other
 

00:14:00.660 --> 00:14:03.030
players play one item after the other
with EXO player we are using a

00:14:03.030 --> 00:14:03.040
with EXO player we are using a
 

00:14:03.040 --> 00:14:05.610
with EXO player we are using a
concatenating media source to implement

00:14:05.610 --> 00:14:05.620
concatenating media source to implement
 

00:14:05.620 --> 00:14:08.520
concatenating media source to implement
playlists these concatenating media

00:14:08.520 --> 00:14:08.530
playlists these concatenating media
 

00:14:08.530 --> 00:14:11.100
playlists these concatenating media
source just joins together a number of

00:14:11.100 --> 00:14:11.110
source just joins together a number of
 

00:14:11.110 --> 00:14:13.890
source just joins together a number of
media sources and place them callously

00:14:13.890 --> 00:14:13.900
media sources and place them callously
 

00:14:13.900 --> 00:14:15.990
media sources and place them callously
and without rebuffering in between so we

00:14:15.990 --> 00:14:16.000
and without rebuffering in between so we
 

00:14:16.000 --> 00:14:18.270
and without rebuffering in between so we
achieve a pretty nice user experience

00:14:18.270 --> 00:14:18.280
achieve a pretty nice user experience
 

00:14:18.280 --> 00:14:22.620
achieve a pretty nice user experience
for platfor do play back the

00:14:22.620 --> 00:14:22.630
for platfor do play back the
 

00:14:22.630 --> 00:14:24.390
for platfor do play back the
concatenating media source also allows

00:14:24.390 --> 00:14:24.400
concatenating media source also allows
 

00:14:24.400 --> 00:14:26.760
concatenating media source also allows
us to dynamically change the playlists

00:14:26.760 --> 00:14:26.770
us to dynamically change the playlists
 

00:14:26.770 --> 00:14:29.040
us to dynamically change the playlists
so we can add and remove media sources

00:14:29.040 --> 00:14:29.050
so we can add and remove media sources
 

00:14:29.050 --> 00:14:31.350
so we can add and remove media sources
while the player is playing or we can

00:14:31.350 --> 00:14:31.360
while the player is playing or we can
 

00:14:31.360 --> 00:14:34.560
while the player is playing or we can
even move the currently playing item in

00:14:34.560 --> 00:14:34.570
even move the currently playing item in
 

00:14:34.570 --> 00:14:36.300
even move the currently playing item in
our playlist while the player is playing

00:14:36.300 --> 00:14:36.310
our playlist while the player is playing
 

00:14:36.310 --> 00:14:39.030
our playlist while the player is playing
that's pretty neat so Andrew already

00:14:39.030 --> 00:14:39.040
that's pretty neat so Andrew already
 

00:14:39.040 --> 00:14:41.220
that's pretty neat so Andrew already
started to iterate over our song whose

00:14:41.220 --> 00:14:41.230
started to iterate over our song whose
 

00:14:41.230 --> 00:14:44.190
started to iterate over our song whose
area and for each sample we get a URI we

00:14:44.190 --> 00:14:44.200
area and for each sample we get a URI we
 

00:14:44.200 --> 00:14:46.290
area and for each sample we get a URI we
again are going to create an extractor

00:14:46.290 --> 00:14:46.300
again are going to create an extractor
 

00:14:46.300 --> 00:14:48.630
again are going to create an extractor
media source but then we add this

00:14:48.630 --> 00:14:48.640
media source but then we add this
 

00:14:48.640 --> 00:14:49.920
media source but then we add this
extract a media source to our

00:14:49.920 --> 00:14:49.930
extract a media source to our
 

00:14:49.930 --> 00:14:53.010
extract a media source to our
concatenating media source in the end we

00:14:53.010 --> 00:14:53.020
concatenating media source in the end we
 

00:14:53.020 --> 00:14:54.450
concatenating media source in the end we
prepare our player with this

00:14:54.450 --> 00:14:54.460
prepare our player with this
 

00:14:54.460 --> 00:14:56.760
prepare our player with this
concatenating media source and we are

00:14:56.760 --> 00:14:56.770
concatenating media source and we are
 

00:14:56.770 --> 00:14:58.620
concatenating media source and we are
already done we are now supporting

00:14:58.620 --> 00:14:58.630
already done we are now supporting
 

00:14:58.630 --> 00:15:00.990
already done we are now supporting
playlists with gapless play gapless

00:15:00.990 --> 00:15:01.000
playlists with gapless play gapless
 

00:15:01.000 --> 00:15:03.540
playlists with gapless play gapless
which play gapless lee and without repo

00:15:03.540 --> 00:15:03.550
which play gapless lee and without repo
 

00:15:03.550 --> 00:15:07.740
which play gapless lee and without repo
rebuffering so but now let's have a look

00:15:07.740 --> 00:15:07.750
rebuffering so but now let's have a look
 

00:15:07.750 --> 00:15:09.570
rebuffering so but now let's have a look
at our service again and make it a

00:15:09.570 --> 00:15:09.580
at our service again and make it a
 

00:15:09.580 --> 00:15:12.030
at our service again and make it a
proper foreground service we've already

00:15:12.030 --> 00:15:12.040
proper foreground service we've already
 

00:15:12.040 --> 00:15:15.060
proper foreground service we've already
said we need to attach a notification to

00:15:15.060 --> 00:15:15.070
said we need to attach a notification to
 

00:15:15.070 --> 00:15:17.730
said we need to attach a notification to
our foreground service and for this we

00:15:17.730 --> 00:15:17.740
our foreground service and for this we
 

00:15:17.740 --> 00:15:20.280
our foreground service and for this we
are going to use the player notification

00:15:20.280 --> 00:15:20.290
are going to use the player notification
 

00:15:20.290 --> 00:15:22.620
are going to use the player notification
service in what manager the player

00:15:22.620 --> 00:15:22.630
service in what manager the player
 

00:15:22.630 --> 00:15:25.380
service in what manager the player
notification manager will not only

00:15:25.380 --> 00:15:25.390
notification manager will not only
 

00:15:25.390 --> 00:15:27.660
notification manager will not only
create the notification but it will keep

00:15:27.660 --> 00:15:27.670
create the notification but it will keep
 

00:15:27.670 --> 00:15:30.030
create the notification but it will keep
it nicely in sync with the state of the

00:15:30.030 --> 00:15:30.040
it nicely in sync with the state of the
 

00:15:30.040 --> 00:15:32.310
it nicely in sync with the state of the
player so each time the player state

00:15:32.310 --> 00:15:32.320
player so each time the player state
 

00:15:32.320 --> 00:15:34.650
player so each time the player state
changed the manager will update an

00:15:34.650 --> 00:15:34.660
changed the manager will update an
 

00:15:34.660 --> 00:15:35.350
changed the manager will update an
application

00:15:35.350 --> 00:15:35.360
application
 

00:15:35.360 --> 00:15:38.499
application
and post it to our driver again we use a

00:15:38.499 --> 00:15:38.509
and post it to our driver again we use a
 

00:15:38.509 --> 00:15:40.539
and post it to our driver again we use a
static method to create display or

00:15:40.539 --> 00:15:40.549
static method to create display or
 

00:15:40.549 --> 00:15:42.609
static method to create display or
notification manager and we need to pass

00:15:42.609 --> 00:15:42.619
notification manager and we need to pass
 

00:15:42.619 --> 00:15:45.369
notification manager and we need to pass
a couple of arguments which first we

00:15:45.369 --> 00:15:45.379
a couple of arguments which first we
 

00:15:45.379 --> 00:15:47.590
a couple of arguments which first we
need to pass the context then we need to

00:15:47.590 --> 00:15:47.600
need to pass the context then we need to
 

00:15:47.600 --> 00:15:50.710
need to pass the context then we need to
pass the channel ID which identifies our

00:15:50.710 --> 00:15:50.720
pass the channel ID which identifies our
 

00:15:50.720 --> 00:15:52.379
pass the channel ID which identifies our
channel to which we post our

00:15:52.379 --> 00:15:52.389
channel to which we post our
 

00:15:52.389 --> 00:15:55.030
channel to which we post our
notification the next parameter is a

00:15:55.030 --> 00:15:55.040
notification the next parameter is a
 

00:15:55.040 --> 00:15:57.449
notification the next parameter is a
string identifier which which gives us a

00:15:57.449 --> 00:15:57.459
string identifier which which gives us a
 

00:15:57.459 --> 00:16:00.249
string identifier which which gives us a
localized name for our channel this is

00:16:00.249 --> 00:16:00.259
localized name for our channel this is
 

00:16:00.259 --> 00:16:01.929
localized name for our channel this is
the name which shows up in the settings

00:16:01.929 --> 00:16:01.939
the name which shows up in the settings
 

00:16:01.939 --> 00:16:04.689
the name which shows up in the settings
dialog where our user maybe want to mute

00:16:04.689 --> 00:16:04.699
dialog where our user maybe want to mute
 

00:16:04.699 --> 00:16:07.960
dialog where our user maybe want to mute
our notification channel and then next

00:16:07.960 --> 00:16:07.970
our notification channel and then next
 

00:16:07.970 --> 00:16:10.389
our notification channel and then next
parameter is a notification ID to

00:16:10.389 --> 00:16:10.399
parameter is a notification ID to
 

00:16:10.399 --> 00:16:13.419
parameter is a notification ID to
identify identify our notification and

00:16:13.419 --> 00:16:13.429
identify identify our notification and
 

00:16:13.429 --> 00:16:16.449
identify identify our notification and
finally we need to pass a so called

00:16:16.449 --> 00:16:16.459
finally we need to pass a so called
 

00:16:16.459 --> 00:16:19.840
finally we need to pass a so called
media description adapter the manager

00:16:19.840 --> 00:16:19.850
media description adapter the manager
 

00:16:19.850 --> 00:16:22.059
media description adapter the manager
will use our adapter to get information

00:16:22.059 --> 00:16:22.069
will use our adapter to get information
 

00:16:22.069 --> 00:16:24.850
will use our adapter to get information
about the currently playing item so each

00:16:24.850 --> 00:16:24.860
about the currently playing item so each
 

00:16:24.860 --> 00:16:27.129
about the currently playing item so each
time the notification is rebuilt the

00:16:27.129 --> 00:16:27.139
time the notification is rebuilt the
 

00:16:27.139 --> 00:16:28.539
time the notification is rebuilt the
adapter is called to get this

00:16:28.539 --> 00:16:28.549
adapter is called to get this
 

00:16:28.549 --> 00:16:32.169
adapter is called to get this
information so we see that for each of

00:16:32.169 --> 00:16:32.179
information so we see that for each of
 

00:16:32.179 --> 00:16:34.749
information so we see that for each of
those callbacks the player instance is

00:16:34.749 --> 00:16:34.759
those callbacks the player instance is
 

00:16:34.759 --> 00:16:37.329
those callbacks the player instance is
passed to the method so we can use this

00:16:37.329 --> 00:16:37.339
passed to the method so we can use this
 

00:16:37.339 --> 00:16:39.850
passed to the method so we can use this
player this player to get the current

00:16:39.850 --> 00:16:39.860
player this player to get the current
 

00:16:39.860 --> 00:16:42.009
player this player to get the current
window index the current window index

00:16:42.009 --> 00:16:42.019
window index the current window index
 

00:16:42.019 --> 00:16:44.859
window index the current window index
gives us the index to pick our sample

00:16:44.859 --> 00:16:44.869
gives us the index to pick our sample
 

00:16:44.869 --> 00:16:47.919
gives us the index to pick our sample
out of our samples arrey which is kind

00:16:47.919 --> 00:16:47.929
out of our samples arrey which is kind
 

00:16:47.929 --> 00:16:50.499
out of our samples arrey which is kind
of the playlist we return the title to

00:16:50.499 --> 00:16:50.509
of the playlist we return the title to
 

00:16:50.509 --> 00:16:52.030
of the playlist we return the title to
get a content title then we have a

00:16:52.030 --> 00:16:52.040
get a content title then we have a
 

00:16:52.040 --> 00:16:53.710
get a content title then we have a
pretty similar method where we just

00:16:53.710 --> 00:16:53.720
pretty similar method where we just
 

00:16:53.720 --> 00:16:56.199
pretty similar method where we just
return the description which is a longer

00:16:56.199 --> 00:16:56.209
return the description which is a longer
 

00:16:56.209 --> 00:16:58.030
return the description which is a longer
text which is displayed in the context

00:16:58.030 --> 00:16:58.040
text which is displayed in the context
 

00:16:58.040 --> 00:17:01.030
text which is displayed in the context
in a notification and finally we also

00:17:01.030 --> 00:17:01.040
in a notification and finally we also
 

00:17:01.040 --> 00:17:02.739
in a notification and finally we also
provide a bitmap to make our

00:17:02.739 --> 00:17:02.749
provide a bitmap to make our
 

00:17:02.749 --> 00:17:06.129
provide a bitmap to make our
notification a little bit nicer we just

00:17:06.129 --> 00:17:06.139
notification a little bit nicer we just
 

00:17:06.139 --> 00:17:08.860
notification a little bit nicer we just
use a convenient method of our examples

00:17:08.860 --> 00:17:08.870
use a convenient method of our examples
 

00:17:08.870 --> 00:17:11.019
use a convenient method of our examples
to get such a bitmap for each of our

00:17:11.019 --> 00:17:11.029
to get such a bitmap for each of our
 

00:17:11.029 --> 00:17:14.470
to get such a bitmap for each of our
samples finally we also need to provide

00:17:14.470 --> 00:17:14.480
samples finally we also need to provide
 

00:17:14.480 --> 00:17:17.199
samples finally we also need to provide
a pending intent this pending intent is

00:17:17.199 --> 00:17:17.209
a pending intent this pending intent is
 

00:17:17.209 --> 00:17:19.059
a pending intent this pending intent is
fired when the user taps on the

00:17:19.059 --> 00:17:19.069
fired when the user taps on the
 

00:17:19.069 --> 00:17:21.610
fired when the user taps on the
notification and we want to get the user

00:17:21.610 --> 00:17:21.620
notification and we want to get the user
 

00:17:21.620 --> 00:17:24.220
notification and we want to get the user
back to our application in this thin our

00:17:24.220 --> 00:17:24.230
back to our application in this thin our
 

00:17:24.230 --> 00:17:26.829
back to our application in this thin our
example to the main HDV the activity so

00:17:26.829 --> 00:17:26.839
example to the main HDV the activity so
 

00:17:26.839 --> 00:17:29.139
example to the main HDV the activity so
we create and intent pointing to our

00:17:29.139 --> 00:17:29.149
we create and intent pointing to our
 

00:17:29.149 --> 00:17:31.389
we create and intent pointing to our
main activity and then we wrap this

00:17:31.389 --> 00:17:31.399
main activity and then we wrap this
 

00:17:31.399 --> 00:17:33.789
main activity and then we wrap this
intent into a pending intent which we

00:17:33.789 --> 00:17:33.799
intent into a pending intent which we
 

00:17:33.799 --> 00:17:35.980
intent into a pending intent which we
are using with the static method get

00:17:35.980 --> 00:17:35.990
are using with the static method get
 

00:17:35.990 --> 00:17:38.470
are using with the static method get
activities on the pending intent here

00:17:38.470 --> 00:17:38.480
activities on the pending intent here
 

00:17:38.480 --> 00:17:40.480
activities on the pending intent here
again a couple of arguments the context

00:17:40.480 --> 00:17:40.490
again a couple of arguments the context
 

00:17:40.490 --> 00:17:42.759
again a couple of arguments the context
as the first argument then a request

00:17:42.759 --> 00:17:42.769
as the first argument then a request
 

00:17:42.769 --> 00:17:44.680
as the first argument then a request
code which is 0 in our case we are not

00:17:44.680 --> 00:17:44.690
code which is 0 in our case we are not
 

00:17:44.690 --> 00:17:47.230
code which is 0 in our case we are not
going to use it in our sample then they

00:17:47.230 --> 00:17:47.240
going to use it in our sample then they
 

00:17:47.240 --> 00:17:49.270
going to use it in our sample then they
tend pointing to our main active

00:17:49.270 --> 00:17:49.280
tend pointing to our main active
 

00:17:49.280 --> 00:17:52.240
tend pointing to our main active
and finally a flag to tell the system to

00:17:52.240 --> 00:17:52.250
and finally a flag to tell the system to
 

00:17:52.250 --> 00:17:55.000
and finally a flag to tell the system to
update any pending intents already in

00:17:55.000 --> 00:17:55.010
update any pending intents already in
 

00:17:55.010 --> 00:17:58.600
update any pending intents already in
the queue so now we have this player

00:17:58.600 --> 00:17:58.610
the queue so now we have this player
 

00:17:58.610 --> 00:18:01.510
the queue so now we have this player
notification manager we now also need to

00:18:01.510 --> 00:18:01.520
notification manager we now also need to
 

00:18:01.520 --> 00:18:04.240
notification manager we now also need to
register a notification listener this

00:18:04.240 --> 00:18:04.250
register a notification listener this
 

00:18:04.250 --> 00:18:06.940
register a notification listener this
listener makes our service aware of the

00:18:06.940 --> 00:18:06.950
listener makes our service aware of the
 

00:18:06.950 --> 00:18:10.299
listener makes our service aware of the
lifecycle of our notification it has two

00:18:10.299 --> 00:18:10.309
lifecycle of our notification it has two
 

00:18:10.309 --> 00:18:13.210
lifecycle of our notification it has two
methods so we register this notification

00:18:13.210 --> 00:18:13.220
methods so we register this notification
 

00:18:13.220 --> 00:18:17.070
methods so we register this notification
in a listener which is an anonymous

00:18:17.070 --> 00:18:17.080
in a listener which is an anonymous
 

00:18:17.080 --> 00:18:19.649
in a listener which is an anonymous
clause in this case the first method or

00:18:19.649 --> 00:18:19.659
clause in this case the first method or
 

00:18:19.659 --> 00:18:22.600
clause in this case the first method or
notification started is called when the

00:18:22.600 --> 00:18:22.610
notification started is called when the
 

00:18:22.610 --> 00:18:25.450
notification started is called when the
notification is initially created here

00:18:25.450 --> 00:18:25.460
notification is initially created here
 

00:18:25.460 --> 00:18:28.840
notification is initially created here
we are now passed those two arguments to

00:18:28.840 --> 00:18:28.850
we are now passed those two arguments to
 

00:18:28.850 --> 00:18:31.149
we are now passed those two arguments to
the start foreground service and this is

00:18:31.149 --> 00:18:31.159
the start foreground service and this is
 

00:18:31.159 --> 00:18:33.279
the start foreground service and this is
now the moment where our service is

00:18:33.279 --> 00:18:33.289
now the moment where our service is
 

00:18:33.289 --> 00:18:35.680
now the moment where our service is
officially at foreground service we are

00:18:35.680 --> 00:18:35.690
officially at foreground service we are
 

00:18:35.690 --> 00:18:38.140
officially at foreground service we are
now safe the system is not going to kill

00:18:38.140 --> 00:18:38.150
now safe the system is not going to kill
 

00:18:38.150 --> 00:18:42.549
now safe the system is not going to kill
our service anymore the next method then

00:18:42.549 --> 00:18:42.559
our service anymore the next method then
 

00:18:42.559 --> 00:18:44.200
our service anymore the next method then
is called when the notification is

00:18:44.200 --> 00:18:44.210
is called when the notification is
 

00:18:44.210 --> 00:18:46.419
is called when the notification is
counseled here it just stopped self our

00:18:46.419 --> 00:18:46.429
counseled here it just stopped self our
 

00:18:46.429 --> 00:18:48.880
counseled here it just stopped self our
service because we want to terminate the

00:18:48.880 --> 00:18:48.890
service because we want to terminate the
 

00:18:48.890 --> 00:18:52.210
service because we want to terminate the
service finally we also need to register

00:18:52.210 --> 00:18:52.220
service finally we also need to register
 

00:18:52.220 --> 00:18:54.789
service finally we also need to register
the player we set the player if the set

00:18:54.789 --> 00:18:54.799
the player we set the player if the set
 

00:18:54.799 --> 00:18:57.399
the player we set the player if the set
player method on the notification

00:18:57.399 --> 00:18:57.409
player method on the notification
 

00:18:57.409 --> 00:18:59.770
player method on the notification
manager so the notification manager can

00:18:59.770 --> 00:18:59.780
manager so the notification manager can
 

00:18:59.780 --> 00:19:01.779
manager so the notification manager can
sync the player state to the

00:19:01.779 --> 00:19:01.789
sync the player state to the
 

00:19:01.789 --> 00:19:04.750
sync the player state to the
notification so that's about it we also

00:19:04.750 --> 00:19:04.760
notification so that's about it we also
 

00:19:04.760 --> 00:19:07.149
notification so that's about it we also
need to clean up in the ondestroy method

00:19:07.149 --> 00:19:07.159
need to clean up in the ondestroy method
 

00:19:07.159 --> 00:19:09.310
need to clean up in the ondestroy method
here we just lull to set their player

00:19:09.310 --> 00:19:09.320
here we just lull to set their player
 

00:19:09.320 --> 00:19:11.799
here we just lull to set their player
instance again so we don't leak a player

00:19:11.799 --> 00:19:11.809
instance again so we don't leak a player
 

00:19:11.809 --> 00:19:14.470
instance again so we don't leak a player
a player reference when the service is

00:19:14.470 --> 00:19:14.480
a player reference when the service is
 

00:19:14.480 --> 00:19:17.649
a player reference when the service is
being destroyed so now please change

00:19:17.649 --> 00:19:17.659
being destroyed so now please change
 

00:19:17.659 --> 00:19:20.200
being destroyed so now please change
back to the phone and if we done

00:19:20.200 --> 00:19:20.210
back to the phone and if we done
 

00:19:20.210 --> 00:19:22.480
back to the phone and if we done
everything right we should now be able

00:19:22.480 --> 00:19:22.490
everything right we should now be able
 

00:19:22.490 --> 00:19:25.899
everything right we should now be able
to hear the playlist playing in our

00:19:25.899 --> 00:19:25.909
to hear the playlist playing in our
 

00:19:25.909 --> 00:19:30.490
to hear the playlist playing in our
service the application comes up we see

00:19:30.490 --> 00:19:30.500
service the application comes up we see
 

00:19:30.500 --> 00:19:34.210
service the application comes up we see
the notification in the drawer

00:19:34.210 --> 00:19:34.220
 

00:19:34.220 --> 00:19:36.310
it's playing and let's have a look at a

00:19:36.310 --> 00:19:36.320
it's playing and let's have a look at a
 

00:19:36.320 --> 00:19:39.070
it's playing and let's have a look at a
notification in a drawer we see here the

00:19:39.070 --> 00:19:39.080
notification in a drawer we see here the
 

00:19:39.080 --> 00:19:41.530
notification in a drawer we see here the
information which it comes from our

00:19:41.530 --> 00:19:41.540
information which it comes from our
 

00:19:41.540 --> 00:19:43.780
information which it comes from our
adapter we can use the playback controls

00:19:43.780 --> 00:19:43.790
adapter we can use the playback controls
 

00:19:43.790 --> 00:19:46.780
adapter we can use the playback controls
to control playback we can pause or

00:19:46.780 --> 00:19:46.790
to control playback we can pause or
 

00:19:46.790 --> 00:19:49.960
to control playback we can pause or
start again we can skip to the next item

00:19:49.960 --> 00:19:49.970
start again we can skip to the next item
 

00:19:49.970 --> 00:19:53.380
start again we can skip to the next item
and if we tap on the notification it

00:19:53.380 --> 00:19:53.390
and if we tap on the notification it
 

00:19:53.390 --> 00:19:57.820
and if we tap on the notification it
gets us back to the application so fine

00:19:57.820 --> 00:19:57.830
gets us back to the application so fine
 

00:19:57.830 --> 00:20:01.000
gets us back to the application so fine
so as a next step we have seen now that

00:20:01.000 --> 00:20:01.010
so as a next step we have seen now that
 

00:20:01.010 --> 00:20:03.640
so as a next step we have seen now that
this notification contains information

00:20:03.640 --> 00:20:03.650
this notification contains information
 

00:20:03.650 --> 00:20:06.040
this notification contains information
about the current item and about the

00:20:06.040 --> 00:20:06.050
about the current item and about the
 

00:20:06.050 --> 00:20:09.250
about the current item and about the
state and it lets the user control the

00:20:09.250 --> 00:20:09.260
state and it lets the user control the
 

00:20:09.260 --> 00:20:12.430
state and it lets the user control the
media playback what if we want to expose

00:20:12.430 --> 00:20:12.440
media playback what if we want to expose
 

00:20:12.440 --> 00:20:14.290
media playback what if we want to expose
these functionality to external

00:20:14.290 --> 00:20:14.300
these functionality to external
 

00:20:14.300 --> 00:20:18.340
these functionality to external
application good let's go to it and

00:20:18.340 --> 00:20:18.350
application good let's go to it and
 

00:20:18.350 --> 00:20:20.290
application good let's go to it and
there can be go back to the slides

00:20:20.290 --> 00:20:20.300
there can be go back to the slides
 

00:20:20.300 --> 00:20:28.120
there can be go back to the slides
please here Google assistant for example

00:20:28.120 --> 00:20:28.130
please here Google assistant for example
 

00:20:28.130 --> 00:20:31.360
please here Google assistant for example
may want to yeah if you know here we go

00:20:31.360 --> 00:20:31.370
may want to yeah if you know here we go
 

00:20:31.370 --> 00:20:33.790
may want to yeah if you know here we go
Google assistant for example wants to

00:20:33.790 --> 00:20:33.800
Google assistant for example wants to
 

00:20:33.800 --> 00:20:36.640
Google assistant for example wants to
allow the user to use voice commands to

00:20:36.640 --> 00:20:36.650
allow the user to use voice commands to
 

00:20:36.650 --> 00:20:39.460
allow the user to use voice commands to
control media playback and with auto or

00:20:39.460 --> 00:20:39.470
control media playback and with auto or
 

00:20:39.470 --> 00:20:42.520
control media playback and with auto or
various let's use a remote control

00:20:42.520 --> 00:20:42.530
various let's use a remote control
 

00:20:42.530 --> 00:20:45.250
various let's use a remote control
remote control a media application and

00:20:45.250 --> 00:20:45.260
remote control a media application and
 

00:20:45.260 --> 00:20:47.440
remote control a media application and
browse in a media catalog of our

00:20:47.440 --> 00:20:47.450
browse in a media catalog of our
 

00:20:47.450 --> 00:20:50.920
browse in a media catalog of our
application the android framework has a

00:20:50.920 --> 00:20:50.930
application the android framework has a
 

00:20:50.930 --> 00:20:52.870
application the android framework has a
solution for this because we essentially

00:20:52.870 --> 00:20:52.880
solution for this because we essentially
 

00:20:52.880 --> 00:20:55.150
solution for this because we essentially
need to provide three things to let

00:20:55.150 --> 00:20:55.160
need to provide three things to let
 

00:20:55.160 --> 00:20:57.790
need to provide three things to let
external application participate in

00:20:57.790 --> 00:20:57.800
external application participate in
 

00:20:57.800 --> 00:21:00.370
external application participate in
media playback first we need to expose

00:21:00.370 --> 00:21:00.380
media playback first we need to expose
 

00:21:00.380 --> 00:21:02.590
media playback first we need to expose
the playback state this is two things

00:21:02.590 --> 00:21:02.600
the playback state this is two things
 

00:21:02.600 --> 00:21:04.600
the playback state this is two things
like the player state itself the current

00:21:04.600 --> 00:21:04.610
like the player state itself the current
 

00:21:04.610 --> 00:21:07.600
like the player state itself the current
media item or the playlist with which we

00:21:07.600 --> 00:21:07.610
media item or the playlist with which we
 

00:21:07.610 --> 00:21:10.750
media item or the playlist with which we
prepared our player second we need to be

00:21:10.750 --> 00:21:10.760
prepared our player second we need to be
 

00:21:10.760 --> 00:21:12.970
prepared our player second we need to be
able to retrieve playback commands from

00:21:12.970 --> 00:21:12.980
able to retrieve playback commands from
 

00:21:12.980 --> 00:21:15.670
able to retrieve playback commands from
external command external application so

00:21:15.670 --> 00:21:15.680
external command external application so
 

00:21:15.680 --> 00:21:17.740
external command external application so
we can execute those commands on our

00:21:17.740 --> 00:21:17.750
we can execute those commands on our
 

00:21:17.750 --> 00:21:20.440
we can execute those commands on our
player instance and third we need to

00:21:20.440 --> 00:21:20.450
player instance and third we need to
 

00:21:20.450 --> 00:21:22.660
player instance and third we need to
provide ways to browse in our media

00:21:22.660 --> 00:21:22.670
provide ways to browse in our media
 

00:21:22.670 --> 00:21:25.780
provide ways to browse in our media
catalog the android framework provides a

00:21:25.780 --> 00:21:25.790
catalog the android framework provides a
 

00:21:25.790 --> 00:21:27.970
catalog the android framework provides a
solution for this it provides the media

00:21:27.970 --> 00:21:27.980
solution for this it provides the media
 

00:21:27.980 --> 00:21:30.730
solution for this it provides the media
session and the Media Browser service we

00:21:30.730 --> 00:21:30.740
session and the Media Browser service we
 

00:21:30.740 --> 00:21:32.350
session and the Media Browser service we
are not going into the detail of the

00:21:32.350 --> 00:21:32.360
are not going into the detail of the
 

00:21:32.360 --> 00:21:33.970
are not going into the detail of the
Media Browser service because we don't

00:21:33.970 --> 00:21:33.980
Media Browser service because we don't
 

00:21:33.980 --> 00:21:36.640
Media Browser service because we don't
have time for this but we let me look at

00:21:36.640 --> 00:21:36.650
have time for this but we let me look at
 

00:21:36.650 --> 00:21:38.710
have time for this but we let me look at
the media session which allows us to

00:21:38.710 --> 00:21:38.720
the media session which allows us to
 

00:21:38.720 --> 00:21:40.990
the media session which allows us to
expose the playback state and retrieve

00:21:40.990 --> 00:21:41.000
expose the playback state and retrieve
 

00:21:41.000 --> 00:21:45.760
expose the playback state and retrieve
playback commands in our code sample we

00:21:45.760 --> 00:21:45.770
playback commands in our code sample we
 

00:21:45.770 --> 00:21:47.650
playback commands in our code sample we
are going to use that media session

00:21:47.650 --> 00:21:47.660
are going to use that media session
 

00:21:47.660 --> 00:21:48.010
are going to use that media session
Connect

00:21:48.010 --> 00:21:48.020
Connect
 

00:21:48.020 --> 00:21:49.930
Connect
which is part of the mediasession

00:21:49.930 --> 00:21:49.940
which is part of the mediasession
 

00:21:49.940 --> 00:21:52.840
which is part of the mediasession
extension of the exoplayer library this

00:21:52.840 --> 00:21:52.850
extension of the exoplayer library this
 

00:21:52.850 --> 00:21:55.270
extension of the exoplayer library this
mediasession connector synchronizes the

00:21:55.270 --> 00:21:55.280
mediasession connector synchronizes the
 

00:21:55.280 --> 00:21:57.490
mediasession connector synchronizes the
player state with the state of the media

00:21:57.490 --> 00:21:57.500
player state with the state of the media
 

00:21:57.500 --> 00:22:00.280
player state with the state of the media
session and retrieves commands from the

00:22:00.280 --> 00:22:00.290
session and retrieves commands from the
 

00:22:00.290 --> 00:22:03.280
session and retrieves commands from the
media session so let's change again back

00:22:03.280 --> 00:22:03.290
media session so let's change again back
 

00:22:03.290 --> 00:22:06.280
media session so let's change again back
to the laptop please so we can see how

00:22:06.280 --> 00:22:06.290
to the laptop please so we can see how
 

00:22:06.290 --> 00:22:10.030
to the laptop please so we can see how
we can do this in code we are again in

00:22:10.030 --> 00:22:10.040
we can do this in code we are again in
 

00:22:10.040 --> 00:22:12.700
we can do this in code we are again in
the oncreate method of our player of our

00:22:12.700 --> 00:22:12.710
the oncreate method of our player of our
 

00:22:12.710 --> 00:22:14.650
the oncreate method of our player of our
audio player service and we are now

00:22:14.650 --> 00:22:14.660
audio player service and we are now
 

00:22:14.660 --> 00:22:17.020
audio player service and we are now
going to create an instance of a media

00:22:17.020 --> 00:22:17.030
going to create an instance of a media
 

00:22:17.030 --> 00:22:20.140
going to create an instance of a media
session session compart we assign it to

00:22:20.140 --> 00:22:20.150
session session compart we assign it to
 

00:22:20.150 --> 00:22:22.330
session session compart we assign it to
a field we just call the

00:22:22.330 --> 00:22:22.340
a field we just call the
 

00:22:22.340 --> 00:22:25.090
a field we just call the
mediasessioncompat constructor with the

00:22:25.090 --> 00:22:25.100
mediasessioncompat constructor with the
 

00:22:25.100 --> 00:22:27.520
mediasessioncompat constructor with the
context and an identifier which is the

00:22:27.520 --> 00:22:27.530
context and an identifier which is the
 

00:22:27.530 --> 00:22:29.830
context and an identifier which is the
media which is just a string then we

00:22:29.830 --> 00:22:29.840
media which is just a string then we
 

00:22:29.840 --> 00:22:32.590
media which is just a string then we
immediately set our media session had to

00:22:32.590 --> 00:22:32.600
immediately set our media session had to
 

00:22:32.600 --> 00:22:35.410
immediately set our media session had to
active by call back passing through to

00:22:35.410 --> 00:22:35.420
active by call back passing through to
 

00:22:35.420 --> 00:22:38.440
active by call back passing through to
the set active method now as a first

00:22:38.440 --> 00:22:38.450
the set active method now as a first
 

00:22:38.450 --> 00:22:39.850
the set active method now as a first
step we want to make the player

00:22:39.850 --> 00:22:39.860
step we want to make the player
 

00:22:39.860 --> 00:22:41.799
step we want to make the player
notification manager aware of our

00:22:41.799 --> 00:22:41.809
notification manager aware of our
 

00:22:41.809 --> 00:22:44.169
notification manager aware of our
session and we pass the token to the

00:22:44.169 --> 00:22:44.179
session and we pass the token to the
 

00:22:44.179 --> 00:22:46.180
session and we pass the token to the
player notification manager so we can

00:22:46.180 --> 00:22:46.190
player notification manager so we can
 

00:22:46.190 --> 00:22:48.730
player notification manager so we can
enhance the media style notification and

00:22:48.730 --> 00:22:48.740
enhance the media style notification and
 

00:22:48.740 --> 00:22:51.910
enhance the media style notification and
provide an organ artwork for our lock

00:22:51.910 --> 00:22:51.920
provide an organ artwork for our lock
 

00:22:51.920 --> 00:22:55.090
provide an organ artwork for our lock
screen of our device but now we are

00:22:55.090 --> 00:22:55.100
screen of our device but now we are
 

00:22:55.100 --> 00:22:57.370
screen of our device but now we are
going to create such a media session

00:22:57.370 --> 00:22:57.380
going to create such a media session
 

00:22:57.380 --> 00:23:00.250
going to create such a media session
connection we call the constructor and

00:23:00.250 --> 00:23:00.260
connection we call the constructor and
 

00:23:00.260 --> 00:23:03.280
connection we call the constructor and
we just pass the media session to the

00:23:03.280 --> 00:23:03.290
we just pass the media session to the
 

00:23:03.290 --> 00:23:05.049
we just pass the media session to the
connector so he has access to the

00:23:05.049 --> 00:23:05.059
connector so he has access to the
 

00:23:05.059 --> 00:23:09.340
connector so he has access to the
session we said we want to synchronize

00:23:09.340 --> 00:23:09.350
session we said we want to synchronize
 

00:23:09.350 --> 00:23:12.220
session we said we want to synchronize
our playlist with the cue of the media

00:23:12.220 --> 00:23:12.230
our playlist with the cue of the media
 

00:23:12.230 --> 00:23:14.410
our playlist with the cue of the media
session so external application know

00:23:14.410 --> 00:23:14.420
session so external application know
 

00:23:14.420 --> 00:23:16.600
session so external application know
what items we are having in our playlist

00:23:16.600 --> 00:23:16.610
what items we are having in our playlist
 

00:23:16.610 --> 00:23:19.930
what items we are having in our playlist
for this we are going to use a timeline

00:23:19.930 --> 00:23:19.940
for this we are going to use a timeline
 

00:23:19.940 --> 00:23:22.780
for this we are going to use a timeline
view navigator the timeline is the

00:23:22.780 --> 00:23:22.790
view navigator the timeline is the
 

00:23:22.790 --> 00:23:24.669
view navigator the timeline is the
internal representation of the playlist

00:23:24.669 --> 00:23:24.679
internal representation of the playlist
 

00:23:24.679 --> 00:23:27.549
internal representation of the playlist
after the player has been prepared so

00:23:27.549 --> 00:23:27.559
after the player has been prepared so
 

00:23:27.559 --> 00:23:29.860
after the player has been prepared so
there are as many windows in our

00:23:29.860 --> 00:23:29.870
there are as many windows in our
 

00:23:29.870 --> 00:23:31.990
there are as many windows in our
timeline as we have items in our

00:23:31.990 --> 00:23:32.000
timeline as we have items in our
 

00:23:32.000 --> 00:23:35.440
timeline as we have items in our
playlist so with this we can use the

00:23:35.440 --> 00:23:35.450
playlist so with this we can use the
 

00:23:35.450 --> 00:23:37.270
playlist so with this we can use the
window index which is the parameter

00:23:37.270 --> 00:23:37.280
window index which is the parameter
 

00:23:37.280 --> 00:23:40.390
window index which is the parameter
which is passed to our our method we are

00:23:40.390 --> 00:23:40.400
which is passed to our our method we are
 

00:23:40.400 --> 00:23:42.970
which is passed to our our method we are
going to override to create to get the

00:23:42.970 --> 00:23:42.980
going to override to create to get the
 

00:23:42.980 --> 00:23:45.610
going to override to create to get the
samples again out of our our samples

00:23:45.610 --> 00:23:45.620
samples again out of our our samples
 

00:23:45.620 --> 00:23:47.740
samples again out of our our samples
array and we then are going to create a

00:23:47.740 --> 00:23:47.750
array and we then are going to create a
 

00:23:47.750 --> 00:23:50.590
array and we then are going to create a
media description for such a sample

00:23:50.590 --> 00:23:50.600
media description for such a sample
 

00:23:50.600 --> 00:23:53.290
media description for such a sample
let's have a look in this get media

00:23:53.290 --> 00:23:53.300
let's have a look in this get media
 

00:23:53.300 --> 00:23:55.330
let's have a look in this get media
description method to see that there is

00:23:55.330 --> 00:23:55.340
description method to see that there is
 

00:23:55.340 --> 00:23:57.790
description method to see that there is
not much magic behind it we see we are

00:23:57.790 --> 00:23:57.800
not much magic behind it we see we are
 

00:23:57.800 --> 00:24:00.370
not much magic behind it we see we are
just using a media's description

00:24:00.370 --> 00:24:00.380
just using a media's description
 

00:24:00.380 --> 00:24:01.950
just using a media's description
compared builder and

00:24:01.950 --> 00:24:01.960
compared builder and
 

00:24:01.960 --> 00:24:04.560
compared builder and
we populate this data with the data from

00:24:04.560 --> 00:24:04.570
we populate this data with the data from
 

00:24:04.570 --> 00:24:07.649
we populate this data with the data from
our samples and then we built such a

00:24:07.649 --> 00:24:07.659
our samples and then we built such a
 

00:24:07.659 --> 00:24:09.840
our samples and then we built such a
media description compared which we

00:24:09.840 --> 00:24:09.850
media description compared which we
 

00:24:09.850 --> 00:24:14.669
media description compared which we
return to our connector so now we offer

00:24:14.669 --> 00:24:14.679
return to our connector so now we offer
 

00:24:14.679 --> 00:24:16.620
return to our connector so now we offer
we've already this media session

00:24:16.620 --> 00:24:16.630
we've already this media session
 

00:24:16.630 --> 00:24:18.630
we've already this media session
connector as a next step again we need

00:24:18.630 --> 00:24:18.640
connector as a next step again we need
 

00:24:18.640 --> 00:24:20.580
connector as a next step again we need
to pause the player to the connector so

00:24:20.580 --> 00:24:20.590
to pause the player to the connector so
 

00:24:20.590 --> 00:24:22.740
to pause the player to the connector so
we can sync the player with the media

00:24:22.740 --> 00:24:22.750
we can sync the player with the media
 

00:24:22.750 --> 00:24:25.080
we can sync the player with the media
session here we again set use the set

00:24:25.080 --> 00:24:25.090
session here we again set use the set
 

00:24:25.090 --> 00:24:27.720
session here we again set use the set
player method the first parameter is the

00:24:27.720 --> 00:24:27.730
player method the first parameter is the
 

00:24:27.730 --> 00:24:30.029
player method the first parameter is the
player itself the second parameter is a

00:24:30.029 --> 00:24:30.039
player itself the second parameter is a
 

00:24:30.039 --> 00:24:32.159
player itself the second parameter is a
playback preparer we are not going to

00:24:32.159 --> 00:24:32.169
playback preparer we are not going to
 

00:24:32.169 --> 00:24:34.200
playback preparer we are not going to
use it because we don't want to allow

00:24:34.200 --> 00:24:34.210
use it because we don't want to allow
 

00:24:34.210 --> 00:24:36.419
use it because we don't want to allow
external application to initiate

00:24:36.419 --> 00:24:36.429
external application to initiate
 

00:24:36.429 --> 00:24:40.260
external application to initiate
playback in our sample so that's kind of

00:24:40.260 --> 00:24:40.270
playback in our sample so that's kind of
 

00:24:40.270 --> 00:24:42.720
playback in our sample so that's kind of
it again a non destroy we need to clean

00:24:42.720 --> 00:24:42.730
it again a non destroy we need to clean
 

00:24:42.730 --> 00:24:45.779
it again a non destroy we need to clean
up first we just release the media

00:24:45.779 --> 00:24:45.789
up first we just release the media
 

00:24:45.789 --> 00:24:48.299
up first we just release the media
session and as a second step we again

00:24:48.299 --> 00:24:48.309
session and as a second step we again
 

00:24:48.309 --> 00:24:50.430
session and as a second step we again
set the player instance to null this

00:24:50.430 --> 00:24:50.440
set the player instance to null this
 

00:24:50.440 --> 00:24:53.159
set the player instance to null this
time in the connector to avoid leaking

00:24:53.159 --> 00:24:53.169
time in the connector to avoid leaking
 

00:24:53.169 --> 00:24:57.330
time in the connector to avoid leaking
an instance of the player so now that's

00:24:57.330 --> 00:24:57.340
an instance of the player so now that's
 

00:24:57.340 --> 00:25:00.330
an instance of the player so now that's
kind of it if everything is correct we

00:25:00.330 --> 00:25:00.340
kind of it if everything is correct we
 

00:25:00.340 --> 00:25:01.680
kind of it if everything is correct we
should be able to deploy the application

00:25:01.680 --> 00:25:01.690
should be able to deploy the application
 

00:25:01.690 --> 00:25:04.529
should be able to deploy the application
again please switch to the phone again

00:25:04.529 --> 00:25:04.539
again please switch to the phone again
 

00:25:04.539 --> 00:25:06.870
again please switch to the phone again
and Andrew should now be able to use

00:25:06.870 --> 00:25:06.880
and Andrew should now be able to use
 

00:25:06.880 --> 00:25:09.659
and Andrew should now be able to use
Android Google assistant to skip to the

00:25:09.659 --> 00:25:09.669
Android Google assistant to skip to the
 

00:25:09.669 --> 00:25:14.750
Android Google assistant to skip to the
next item let's see if this works

00:25:14.750 --> 00:25:14.760
 

00:25:14.760 --> 00:25:16.650
play next track

00:25:16.650 --> 00:25:16.660
play next track
 

00:25:16.660 --> 00:25:19.830
play next track
[Music]

00:25:19.830 --> 00:25:19.840
[Music]
 

00:25:19.840 --> 00:25:24.360
[Music]
why fine well done thank you

00:25:24.360 --> 00:25:24.370
why fine well done thank you
 

00:25:24.370 --> 00:25:30.100
why fine well done thank you
and now now over to Andrew again for

00:25:30.100 --> 00:25:30.110
and now now over to Andrew again for
 

00:25:30.110 --> 00:25:31.210
and now now over to Andrew again for
downloading in offline functionality

00:25:31.210 --> 00:25:31.220
downloading in offline functionality
 

00:25:31.220 --> 00:25:34.390
downloading in offline functionality
thank you mark if we can switch back to

00:25:34.390 --> 00:25:34.400
thank you mark if we can switch back to
 

00:25:34.400 --> 00:25:37.440
thank you mark if we can switch back to
the slides please

00:25:37.440 --> 00:25:37.450
 

00:25:37.450 --> 00:25:41.560
okay so another feature of meteor apps

00:25:41.560 --> 00:25:41.570
okay so another feature of meteor apps
 

00:25:41.570 --> 00:25:42.940
okay so another feature of meteor apps
that I'm sure you're all familiar with

00:25:42.940 --> 00:25:42.950
that I'm sure you're all familiar with
 

00:25:42.950 --> 00:25:45.250
that I'm sure you're all familiar with
is support for downloading media for

00:25:45.250 --> 00:25:45.260
is support for downloading media for
 

00:25:45.260 --> 00:25:46.870
is support for downloading media for
offline playback this is really

00:25:46.870 --> 00:25:46.880
offline playback this is really
 

00:25:46.880 --> 00:25:48.640
offline playback this is really
important if your users are going to be

00:25:48.640 --> 00:25:48.650
important if your users are going to be
 

00:25:48.650 --> 00:25:50.740
important if your users are going to be
in a situation where they have no

00:25:50.740 --> 00:25:50.750
in a situation where they have no
 

00:25:50.750 --> 00:25:52.120
in a situation where they have no
connectivity or intermittent

00:25:52.120 --> 00:25:52.130
connectivity or intermittent
 

00:25:52.130 --> 00:25:55.330
connectivity or intermittent
connectivity this has been a much

00:25:55.330 --> 00:25:55.340
connectivity this has been a much
 

00:25:55.340 --> 00:25:56.919
connectivity this has been a much
requested feature for a while now and

00:25:56.919 --> 00:25:56.929
requested feature for a while now and
 

00:25:56.929 --> 00:25:58.270
requested feature for a while now and
we're really pleased that we've been

00:25:58.270 --> 00:25:58.280
we're really pleased that we've been
 

00:25:58.280 --> 00:26:00.580
we're really pleased that we've been
able to launch this in our two point 8.0

00:26:00.580 --> 00:26:00.590
able to launch this in our two point 8.0
 

00:26:00.590 --> 00:26:03.669
able to launch this in our two point 8.0
release this week in exoplayer

00:26:03.669 --> 00:26:03.679
release this week in exoplayer
 

00:26:03.679 --> 00:26:06.070
release this week in exoplayer
our support for downloading is built on

00:26:06.070 --> 00:26:06.080
our support for downloading is built on
 

00:26:06.080 --> 00:26:08.230
our support for downloading is built on
top of our support for caching so I'm

00:26:08.230 --> 00:26:08.240
top of our support for caching so I'm
 

00:26:08.240 --> 00:26:10.120
top of our support for caching so I'm
going to and say a little bit about how

00:26:10.120 --> 00:26:10.130
going to and say a little bit about how
 

00:26:10.130 --> 00:26:12.010
going to and say a little bit about how
caching fits into the picture of the

00:26:12.010 --> 00:26:12.020
caching fits into the picture of the
 

00:26:12.020 --> 00:26:13.720
caching fits into the picture of the
player setup and then we'll look at how

00:26:13.720 --> 00:26:13.730
player setup and then we'll look at how
 

00:26:13.730 --> 00:26:17.740
player setup and then we'll look at how
downloading builds on top of that so

00:26:17.740 --> 00:26:17.750
downloading builds on top of that so
 

00:26:17.750 --> 00:26:19.570
downloading builds on top of that so
this diagram is intended to show you the

00:26:19.570 --> 00:26:19.580
this diagram is intended to show you the
 

00:26:19.580 --> 00:26:23.230
this diagram is intended to show you the
data flow when playing one mp3 file we

00:26:23.230 --> 00:26:23.240
data flow when playing one mp3 file we
 

00:26:23.240 --> 00:26:24.730
data flow when playing one mp3 file we
have a song which is in the cloud

00:26:24.730 --> 00:26:24.740
have a song which is in the cloud
 

00:26:24.740 --> 00:26:26.620
have a song which is in the cloud
somewhere we have a data source which is

00:26:26.620 --> 00:26:26.630
somewhere we have a data source which is
 

00:26:26.630 --> 00:26:28.779
somewhere we have a data source which is
requesting that over HTTP it's loading

00:26:28.779 --> 00:26:28.789
requesting that over HTTP it's loading
 

00:26:28.789 --> 00:26:30.789
requesting that over HTTP it's loading
the data and then we had a media source

00:26:30.789 --> 00:26:30.799
the data and then we had a media source
 

00:26:30.799 --> 00:26:32.380
the data and then we had a media source
that was getting the information from

00:26:32.380 --> 00:26:32.390
that was getting the information from
 

00:26:32.390 --> 00:26:34.770
that was getting the information from
there and providing it to the player

00:26:34.770 --> 00:26:34.780
there and providing it to the player
 

00:26:34.780 --> 00:26:37.029
there and providing it to the player
let's see how caching fits into this

00:26:37.029 --> 00:26:37.039
let's see how caching fits into this
 

00:26:37.039 --> 00:26:38.620
let's see how caching fits into this
well it's quite simple we just add a

00:26:38.620 --> 00:26:38.630
well it's quite simple we just add a
 

00:26:38.630 --> 00:26:41.140
well it's quite simple we just add a
cache data source that sits in between

00:26:41.140 --> 00:26:41.150
cache data source that sits in between
 

00:26:41.150 --> 00:26:43.330
cache data source that sits in between
the data source we're using for loading

00:26:43.330 --> 00:26:43.340
the data source we're using for loading
 

00:26:43.340 --> 00:26:45.100
the data source we're using for loading
from the network and the media source

00:26:45.100 --> 00:26:45.110
from the network and the media source
 

00:26:45.110 --> 00:26:46.919
from the network and the media source
that's providing data to the player and

00:26:46.919 --> 00:26:46.929
that's providing data to the player and
 

00:26:46.929 --> 00:26:49.870
that's providing data to the player and
it's going to be responsible in with a

00:26:49.870 --> 00:26:49.880
it's going to be responsible in with a
 

00:26:49.880 --> 00:26:51.700
it's going to be responsible in with a
cache instance in this case we're using

00:26:51.700 --> 00:26:51.710
cache instance in this case we're using
 

00:26:51.710 --> 00:26:53.680
cache instance in this case we're using
a simple cache which is provided by XO

00:26:53.680 --> 00:26:53.690
a simple cache which is provided by XO
 

00:26:53.690 --> 00:26:56.560
a simple cache which is provided by XO
players core library the way this works

00:26:56.560 --> 00:26:56.570
players core library the way this works
 

00:26:56.570 --> 00:26:58.510
players core library the way this works
is as follows when the media source

00:26:58.510 --> 00:26:58.520
is as follows when the media source
 

00:26:58.520 --> 00:27:00.430
is as follows when the media source
requests some data it's going to ask

00:27:00.430 --> 00:27:00.440
requests some data it's going to ask
 

00:27:00.440 --> 00:27:01.840
requests some data it's going to ask
that ask the cache data source to

00:27:01.840 --> 00:27:01.850
that ask the cache data source to
 

00:27:01.850 --> 00:27:03.640
that ask the cache data source to
provide that information the cache data

00:27:03.640 --> 00:27:03.650
provide that information the cache data
 

00:27:03.650 --> 00:27:05.080
provide that information the cache data
source is going to look in the cache if

00:27:05.080 --> 00:27:05.090
source is going to look in the cache if
 

00:27:05.090 --> 00:27:07.539
source is going to look in the cache if
it's present there then that's great we

00:27:07.539 --> 00:27:07.549
it's present there then that's great we
 

00:27:07.549 --> 00:27:09.130
it's present there then that's great we
can get the data from local storage that

00:27:09.130 --> 00:27:09.140
can get the data from local storage that
 

00:27:09.140 --> 00:27:10.810
can get the data from local storage that
goes to the media source and we never

00:27:10.810 --> 00:27:10.820
goes to the media source and we never
 

00:27:10.820 --> 00:27:13.090
goes to the media source and we never
had to go to the network on the other

00:27:13.090 --> 00:27:13.100
had to go to the network on the other
 

00:27:13.100 --> 00:27:15.279
had to go to the network on the other
hand if the data is not present in the

00:27:15.279 --> 00:27:15.289
hand if the data is not present in the
 

00:27:15.289 --> 00:27:17.500
hand if the data is not present in the
cache so we've got a cache miss then the

00:27:17.500 --> 00:27:17.510
cache so we've got a cache miss then the
 

00:27:17.510 --> 00:27:19.600
cache so we've got a cache miss then the
cache data source needs to go to the

00:27:19.600 --> 00:27:19.610
cache data source needs to go to the
 

00:27:19.610 --> 00:27:20.950
cache data source needs to go to the
data source that's being used to load

00:27:20.950 --> 00:27:20.960
data source that's being used to load
 

00:27:20.960 --> 00:27:22.419
data source that's being used to load
from the network and it's going to

00:27:22.419 --> 00:27:22.429
from the network and it's going to
 

00:27:22.429 --> 00:27:24.190
from the network and it's going to
request the data from there and then

00:27:24.190 --> 00:27:24.200
request the data from there and then
 

00:27:24.200 --> 00:27:25.630
request the data from there and then
it's going to store it in the cache when

00:27:25.630 --> 00:27:25.640
it's going to store it in the cache when
 

00:27:25.640 --> 00:27:27.310
it's going to store it in the cache when
it arrives and in this way the cache

00:27:27.310 --> 00:27:27.320
it arrives and in this way the cache
 

00:27:27.320 --> 00:27:29.049
it arrives and in this way the cache
gradually gets populated with the data

00:27:29.049 --> 00:27:29.059
gradually gets populated with the data
 

00:27:29.059 --> 00:27:31.960
gradually gets populated with the data
that's loaded while during playback

00:27:31.960 --> 00:27:31.970
that's loaded while during playback
 

00:27:31.970 --> 00:27:34.330
that's loaded while during playback
you can see also on this diagram we've

00:27:34.330 --> 00:27:34.340
you can see also on this diagram we've
 

00:27:34.340 --> 00:27:36.850
you can see also on this diagram we've
got a cash Viktor this component is

00:27:36.850 --> 00:27:36.860
got a cash Viktor this component is
 

00:27:36.860 --> 00:27:38.410
got a cash Viktor this component is
responsible for making sure that our

00:27:38.410 --> 00:27:38.420
responsible for making sure that our
 

00:27:38.420 --> 00:27:40.450
responsible for making sure that our
cash doesn't grow indefinitely as we

00:27:40.450 --> 00:27:40.460
cash doesn't grow indefinitely as we
 

00:27:40.460 --> 00:27:43.710
cash doesn't grow indefinitely as we
play more and more different media items

00:27:43.710 --> 00:27:43.720
play more and more different media items
 

00:27:43.720 --> 00:27:46.000
play more and more different media items
okay now let's we want to think about

00:27:46.000 --> 00:27:46.010
okay now let's we want to think about
 

00:27:46.010 --> 00:27:48.730
okay now let's we want to think about
downloading so downloading is a separate

00:27:48.730 --> 00:27:48.740
downloading so downloading is a separate
 

00:27:48.740 --> 00:27:49.930
downloading so downloading is a separate
operation which you might want to

00:27:49.930 --> 00:27:49.940
operation which you might want to
 

00:27:49.940 --> 00:27:51.370
operation which you might want to
perform in the background so it might

00:27:51.370 --> 00:27:51.380
perform in the background so it might
 

00:27:51.380 --> 00:27:54.310
perform in the background so it might
need a service and this downloading

00:27:54.310 --> 00:27:54.320
need a service and this downloading
 

00:27:54.320 --> 00:27:56.140
need a service and this downloading
operation what's going on internally is

00:27:56.140 --> 00:27:56.150
operation what's going on internally is
 

00:27:56.150 --> 00:27:58.060
operation what's going on internally is
it's going to read through the entire

00:27:58.060 --> 00:27:58.070
it's going to read through the entire
 

00:27:58.070 --> 00:28:00.010
it's going to read through the entire
stream and as it does that it'll be

00:28:00.010 --> 00:28:00.020
stream and as it does that it'll be
 

00:28:00.020 --> 00:28:02.650
stream and as it does that it'll be
populating the same cache instance that

00:28:02.650 --> 00:28:02.660
populating the same cache instance that
 

00:28:02.660 --> 00:28:05.050
populating the same cache instance that
you're using for playback and as you can

00:28:05.050 --> 00:28:05.060
you're using for playback and as you can
 

00:28:05.060 --> 00:28:06.340
you're using for playback and as you can
probably guess when you do this

00:28:06.340 --> 00:28:06.350
probably guess when you do this
 

00:28:06.350 --> 00:28:08.350
probably guess when you do this
operation if you've populated the cache

00:28:08.350 --> 00:28:08.360
operation if you've populated the cache
 

00:28:08.360 --> 00:28:10.420
operation if you've populated the cache
with all of the data then when it comes

00:28:10.420 --> 00:28:10.430
with all of the data then when it comes
 

00:28:10.430 --> 00:28:12.460
with all of the data then when it comes
to playback your player is going to be

00:28:12.460 --> 00:28:12.470
to playback your player is going to be
 

00:28:12.470 --> 00:28:14.020
to playback your player is going to be
able to get everything from the cache

00:28:14.020 --> 00:28:14.030
able to get everything from the cache
 

00:28:14.030 --> 00:28:15.910
able to get everything from the cache
from the cache data source there's never

00:28:15.910 --> 00:28:15.920
from the cache data source there's never
 

00:28:15.920 --> 00:28:18.210
from the cache data source there's never
a need to go to the network in this case

00:28:18.210 --> 00:28:18.220
a need to go to the network in this case
 

00:28:18.220 --> 00:28:21.070
a need to go to the network in this case
one very important thing to note is that

00:28:21.070 --> 00:28:21.080
one very important thing to note is that
 

00:28:21.080 --> 00:28:23.080
one very important thing to note is that
we've got a no op cache of victor so

00:28:23.080 --> 00:28:23.090
we've got a no op cache of victor so
 

00:28:23.090 --> 00:28:24.490
we've got a no op cache of victor so
this is an implementation of cache the

00:28:24.490 --> 00:28:24.500
this is an implementation of cache the
 

00:28:24.500 --> 00:28:26.650
this is an implementation of cache the
victor which does nothing it's never

00:28:26.650 --> 00:28:26.660
victor which does nothing it's never
 

00:28:26.660 --> 00:28:29.020
victor which does nothing it's never
going to evict data from the cache the

00:28:29.020 --> 00:28:29.030
going to evict data from the cache the
 

00:28:29.030 --> 00:28:30.310
going to evict data from the cache the
reason we have that is that we don't

00:28:30.310 --> 00:28:30.320
reason we have that is that we don't
 

00:28:30.320 --> 00:28:32.260
reason we have that is that we don't
want to have a situation whereby we're

00:28:32.260 --> 00:28:32.270
want to have a situation whereby we're
 

00:28:32.270 --> 00:28:33.970
want to have a situation whereby we're
downloading the stream and then when

00:28:33.970 --> 00:28:33.980
downloading the stream and then when
 

00:28:33.980 --> 00:28:35.410
downloading the stream and then when
we've downloaded up to a certain amount

00:28:35.410 --> 00:28:35.420
we've downloaded up to a certain amount
 

00:28:35.420 --> 00:28:37.630
we've downloaded up to a certain amount
of data we start getting rid of data at

00:28:37.630 --> 00:28:37.640
of data we start getting rid of data at
 

00:28:37.640 --> 00:28:38.740
of data we start getting rid of data at
the beginning of the stream because that

00:28:38.740 --> 00:28:38.750
the beginning of the stream because that
 

00:28:38.750 --> 00:28:42.730
the beginning of the stream because that
would be very annoying for users ok

00:28:42.730 --> 00:28:42.740
would be very annoying for users ok
 

00:28:42.740 --> 00:28:44.380
would be very annoying for users ok
so that's the theory let's see how this

00:28:44.380 --> 00:28:44.390
so that's the theory let's see how this
 

00:28:44.390 --> 00:28:46.600
so that's the theory let's see how this
works in practice if we could switch

00:28:46.600 --> 00:28:46.610
works in practice if we could switch
 

00:28:46.610 --> 00:28:49.660
works in practice if we could switch
back to the laptop please so we're going

00:28:49.660 --> 00:28:49.670
back to the laptop please so we're going
 

00:28:49.670 --> 00:28:50.740
back to the laptop please so we're going
to do this in three steps

00:28:50.740 --> 00:28:50.750
to do this in three steps
 

00:28:50.750 --> 00:28:52.840
to do this in three steps
the first step is we're going to add

00:28:52.840 --> 00:28:52.850
the first step is we're going to add
 

00:28:52.850 --> 00:28:56.380
the first step is we're going to add
support for caching to our player then

00:28:56.380 --> 00:28:56.390
support for caching to our player then
 

00:28:56.390 --> 00:28:57.940
support for caching to our player then
we're going to implement an audio

00:28:57.940 --> 00:28:57.950
we're going to implement an audio
 

00:28:57.950 --> 00:28:59.440
we're going to implement an audio
download service which is going to

00:28:59.440 --> 00:28:59.450
download service which is going to
 

00:28:59.450 --> 00:29:01.120
download service which is going to
actually run the download operation as

00:29:01.120 --> 00:29:01.130
actually run the download operation as
 

00:29:01.130 --> 00:29:03.700
actually run the download operation as
in the background then finally we're

00:29:03.700 --> 00:29:03.710
in the background then finally we're
 

00:29:03.710 --> 00:29:05.440
in the background then finally we're
going to add a very minimal piece of UI

00:29:05.440 --> 00:29:05.450
going to add a very minimal piece of UI
 

00:29:05.450 --> 00:29:07.690
going to add a very minimal piece of UI
to our activity in order to let us

00:29:07.690 --> 00:29:07.700
to our activity in order to let us
 

00:29:07.700 --> 00:29:11.170
to our activity in order to let us
trigger the downloads to take place okay

00:29:11.170 --> 00:29:11.180
trigger the downloads to take place okay
 

00:29:11.180 --> 00:29:13.750
trigger the downloads to take place okay
so we'll go ahead and create a cache

00:29:13.750 --> 00:29:13.760
so we'll go ahead and create a cache
 

00:29:13.760 --> 00:29:16.210
so we'll go ahead and create a cache
data source Factory and as we saw on the

00:29:16.210 --> 00:29:16.220
data source Factory and as we saw on the
 

00:29:16.220 --> 00:29:17.740
data source Factory and as we saw on the
slide this is going to sit between our

00:29:17.740 --> 00:29:17.750
slide this is going to sit between our
 

00:29:17.750 --> 00:29:19.330
slide this is going to sit between our
data source factory for loading from the

00:29:19.330 --> 00:29:19.340
data source factory for loading from the
 

00:29:19.340 --> 00:29:21.280
data source factory for loading from the
network and the media source which is

00:29:21.280 --> 00:29:21.290
network and the media source which is
 

00:29:21.290 --> 00:29:22.690
network and the media source which is
actually going to be extracting the

00:29:22.690 --> 00:29:22.700
actually going to be extracting the
 

00:29:22.700 --> 00:29:26.230
actually going to be extracting the
media so you can see we're using a

00:29:26.230 --> 00:29:26.240
media so you can see we're using a
 

00:29:26.240 --> 00:29:27.910
media so you can see we're using a
utility method to get our cache and

00:29:27.910 --> 00:29:27.920
utility method to get our cache and
 

00:29:27.920 --> 00:29:29.680
utility method to get our cache and
let's jump into that and see what's

00:29:29.680 --> 00:29:29.690
let's jump into that and see what's
 

00:29:29.690 --> 00:29:32.350
let's jump into that and see what's
going on there so as I mentioned we're

00:29:32.350 --> 00:29:32.360
going on there so as I mentioned we're
 

00:29:32.360 --> 00:29:34.450
going on there so as I mentioned we're
sharing the same cache for playback and

00:29:34.450 --> 00:29:34.460
sharing the same cache for playback and
 

00:29:34.460 --> 00:29:36.370
sharing the same cache for playback and
downloading and that means it's

00:29:36.370 --> 00:29:36.380
downloading and that means it's
 

00:29:36.380 --> 00:29:37.510
downloading and that means it's
important that we just have a single

00:29:37.510 --> 00:29:37.520
important that we just have a single
 

00:29:37.520 --> 00:29:40.660
important that we just have a single
tune for our whole process inside get

00:29:40.660 --> 00:29:40.670
tune for our whole process inside get
 

00:29:40.670 --> 00:29:42.190
tune for our whole process inside get
cache what we're doing is we check if

00:29:42.190 --> 00:29:42.200
cache what we're doing is we check if
 

00:29:42.200 --> 00:29:43.870
cache what we're doing is we check if
we've got one already if we don't have

00:29:43.870 --> 00:29:43.880
we've got one already if we don't have
 

00:29:43.880 --> 00:29:45.910
we've got one already if we don't have
one we're going to create a file

00:29:45.910 --> 00:29:45.920
one we're going to create a file
 

00:29:45.920 --> 00:29:48.010
one we're going to create a file
which is pointing to a directory where

00:29:48.010 --> 00:29:48.020
which is pointing to a directory where
 

00:29:48.020 --> 00:29:50.470
which is pointing to a directory where
we're going to store the downloads then

00:29:50.470 --> 00:29:50.480
we're going to store the downloads then
 

00:29:50.480 --> 00:29:52.000
we're going to store the downloads then
we're going to instantiate a simple

00:29:52.000 --> 00:29:52.010
we're going to instantiate a simple
 

00:29:52.010 --> 00:29:54.700
we're going to instantiate a simple
cache passing in that directory and also

00:29:54.700 --> 00:29:54.710
cache passing in that directory and also
 

00:29:54.710 --> 00:29:56.260
cache passing in that directory and also
a no op cache of victor which is very

00:29:56.260 --> 00:29:56.270
a no op cache of victor which is very
 

00:29:56.270 --> 00:29:57.760
a no op cache of victor which is very
important because we don't want to be

00:29:57.760 --> 00:29:57.770
important because we don't want to be
 

00:29:57.770 --> 00:30:01.390
important because we don't want to be
removing data from the cache okay so

00:30:01.390 --> 00:30:01.400
removing data from the cache okay so
 

00:30:01.400 --> 00:30:04.180
removing data from the cache okay so
that's how we make a simple cache we

00:30:04.180 --> 00:30:04.190
that's how we make a simple cache we
 

00:30:04.190 --> 00:30:05.530
that's how we make a simple cache we
also need to provide the cache data

00:30:05.530 --> 00:30:05.540
also need to provide the cache data
 

00:30:05.540 --> 00:30:07.900
also need to provide the cache data
source factory with the upstream data

00:30:07.900 --> 00:30:07.910
source factory with the upstream data
 

00:30:07.910 --> 00:30:09.760
source factory with the upstream data
source factory for loading data from the

00:30:09.760 --> 00:30:09.770
source factory for loading data from the
 

00:30:09.770 --> 00:30:12.640
source factory for loading data from the
network okay and that's what we need to

00:30:12.640 --> 00:30:12.650
network okay and that's what we need to
 

00:30:12.650 --> 00:30:14.230
network okay and that's what we need to
instantiate a cached data source factory

00:30:14.230 --> 00:30:14.240
instantiate a cached data source factory
 

00:30:14.240 --> 00:30:16.480
instantiate a cached data source factory
let's introduce a local variable for

00:30:16.480 --> 00:30:16.490
let's introduce a local variable for
 

00:30:16.490 --> 00:30:18.549
let's introduce a local variable for
that and then we're going to use that

00:30:18.549 --> 00:30:18.559
that and then we're going to use that
 

00:30:18.559 --> 00:30:20.590
that and then we're going to use that
cache data source factory in place of

00:30:20.590 --> 00:30:20.600
cache data source factory in place of
 

00:30:20.600 --> 00:30:22.240
cache data source factory in place of
the data source factory we were using

00:30:22.240 --> 00:30:22.250
the data source factory we were using
 

00:30:22.250 --> 00:30:25.870
the data source factory we were using
before for loading from the network okay

00:30:25.870 --> 00:30:25.880
before for loading from the network okay
 

00:30:25.880 --> 00:30:28.240
before for loading from the network okay
so hopefully that makes sense for adding

00:30:28.240 --> 00:30:28.250
so hopefully that makes sense for adding
 

00:30:28.250 --> 00:30:30.669
so hopefully that makes sense for adding
support for caching to our player now

00:30:30.669 --> 00:30:30.679
support for caching to our player now
 

00:30:30.679 --> 00:30:31.990
support for caching to our player now
we're going to move on and we're going

00:30:31.990 --> 00:30:32.000
we're going to move on and we're going
 

00:30:32.000 --> 00:30:34.030
we're going to move on and we're going
to add an audio download service which

00:30:34.030 --> 00:30:34.040
to add an audio download service which
 

00:30:34.040 --> 00:30:35.380
to add an audio download service which
is actually going to run the downloading

00:30:35.380 --> 00:30:35.390
is actually going to run the downloading
 

00:30:35.390 --> 00:30:40.270
is actually going to run the downloading
operation so we provide a superclass

00:30:40.270 --> 00:30:40.280
operation so we provide a superclass
 

00:30:40.280 --> 00:30:43.180
operation so we provide a superclass
forward called download service for your

00:30:43.180 --> 00:30:43.190
forward called download service for your
 

00:30:43.190 --> 00:30:44.860
forward called download service for your
for you download services that you'll be

00:30:44.860 --> 00:30:44.870
for you download services that you'll be
 

00:30:44.870 --> 00:30:46.299
for you download services that you'll be
putting in your application so we'll be

00:30:46.299 --> 00:30:46.309
putting in your application so we'll be
 

00:30:46.309 --> 00:30:52.240
putting in your application so we'll be
inheriting from that here ok so there's

00:30:52.240 --> 00:30:52.250
inheriting from that here ok so there's
 

00:30:52.250 --> 00:30:53.680
inheriting from that here ok so there's
a few things a few steps we need to do

00:30:53.680 --> 00:30:53.690
a few things a few steps we need to do
 

00:30:53.690 --> 00:30:55.810
a few things a few steps we need to do
now the most important one important not

00:30:55.810 --> 00:30:55.820
now the most important one important not
 

00:30:55.820 --> 00:30:57.820
now the most important one important not
to forget is to add a declaration for

00:30:57.820 --> 00:30:57.830
to forget is to add a declaration for
 

00:30:57.830 --> 00:31:00.130
to forget is to add a declaration for
the service to your manifest so we're

00:31:00.130 --> 00:31:00.140
the service to your manifest so we're
 

00:31:00.140 --> 00:31:01.630
the service to your manifest so we're
going to add our audio download service

00:31:01.630 --> 00:31:01.640
going to add our audio download service
 

00:31:01.640 --> 00:31:04.539
going to add our audio download service
here now we can switch back and we have

00:31:04.539 --> 00:31:04.549
here now we can switch back and we have
 

00:31:04.549 --> 00:31:06.730
here now we can switch back and we have
to implement a constructor and three

00:31:06.730 --> 00:31:06.740
to implement a constructor and three
 

00:31:06.740 --> 00:31:08.980
to implement a constructor and three
methods so let's let's start doing that

00:31:08.980 --> 00:31:08.990
methods so let's let's start doing that
 

00:31:08.990 --> 00:31:11.169
methods so let's let's start doing that
we'll create a constructor with no

00:31:11.169 --> 00:31:11.179
we'll create a constructor with no
 

00:31:11.179 --> 00:31:13.270
we'll create a constructor with no
arguments but then we're going to call

00:31:13.270 --> 00:31:13.280
arguments but then we're going to call
 

00:31:13.280 --> 00:31:14.950
arguments but then we're going to call
the super constructor and pass in some

00:31:14.950 --> 00:31:14.960
the super constructor and pass in some
 

00:31:14.960 --> 00:31:16.270
the super constructor and pass in some
information about the download

00:31:16.270 --> 00:31:16.280
information about the download
 

00:31:16.280 --> 00:31:18.130
information about the download
notifications so we'll need a

00:31:18.130 --> 00:31:18.140
notifications so we'll need a
 

00:31:18.140 --> 00:31:20.350
notifications so we'll need a
notification ID which must be different

00:31:20.350 --> 00:31:20.360
notification ID which must be different
 

00:31:20.360 --> 00:31:22.120
notification ID which must be different
from the notification ID we used for

00:31:22.120 --> 00:31:22.130
from the notification ID we used for
 

00:31:22.130 --> 00:31:22.919
from the notification ID we used for
audio playback

00:31:22.919 --> 00:31:22.929
audio playback
 

00:31:22.929 --> 00:31:25.750
audio playback
we'll also pass in an interval and what

00:31:25.750 --> 00:31:25.760
we'll also pass in an interval and what
 

00:31:25.760 --> 00:31:28.030
we'll also pass in an interval and what
at which to update the notification and

00:31:28.030 --> 00:31:28.040
at which to update the notification and
 

00:31:28.040 --> 00:31:30.190
at which to update the notification and
we'll just use the default here will

00:31:30.190 --> 00:31:30.200
we'll just use the default here will
 

00:31:30.200 --> 00:31:32.710
we'll just use the default here will
pass in we'll pass in a channel ID for

00:31:32.710 --> 00:31:32.720
pass in we'll pass in a channel ID for
 

00:31:32.720 --> 00:31:35.640
pass in we'll pass in a channel ID for
our download notification channel and

00:31:35.640 --> 00:31:35.650
our download notification channel and
 

00:31:35.650 --> 00:31:38.080
our download notification channel and
finally we also need to provide a string

00:31:38.080 --> 00:31:38.090
finally we also need to provide a string
 

00:31:38.090 --> 00:31:39.580
finally we also need to provide a string
resource which describes the

00:31:39.580 --> 00:31:39.590
resource which describes the
 

00:31:39.590 --> 00:31:41.350
resource which describes the
notification channel and that works just

00:31:41.350 --> 00:31:41.360
notification channel and that works just
 

00:31:41.360 --> 00:31:44.020
notification channel and that works just
the same as the one we did for audio

00:31:44.020 --> 00:31:44.030
the same as the one we did for audio
 

00:31:44.030 --> 00:31:45.640
the same as the one we did for audio
playback that had a notification channel

00:31:45.640 --> 00:31:45.650
playback that had a notification channel
 

00:31:45.650 --> 00:31:49.390
playback that had a notification channel
as well now we need to override some

00:31:49.390 --> 00:31:49.400
as well now we need to override some
 

00:31:49.400 --> 00:31:53.140
as well now we need to override some
methods so let's have a look at those

00:31:53.140 --> 00:31:53.150
methods so let's have a look at those
 

00:31:53.150 --> 00:31:55.330
methods so let's have a look at those
the first one is we need to provide a

00:31:55.330 --> 00:31:55.340
the first one is we need to provide a
 

00:31:55.340 --> 00:31:57.250
the first one is we need to provide a
download manager and we have a utility

00:31:57.250 --> 00:31:57.260
download manager and we have a utility
 

00:31:57.260 --> 00:31:58.419
download manager and we have a utility
method for this which we'll have a look

00:31:58.419 --> 00:31:58.429
method for this which we'll have a look
 

00:31:58.429 --> 00:31:59.620
method for this which we'll have a look
at in a second

00:31:59.620 --> 00:31:59.630
at in a second
 

00:31:59.630 --> 00:32:02.289
at in a second
that's just taking a context let's jump

00:32:02.289 --> 00:32:02.299
that's just taking a context let's jump
 

00:32:02.299 --> 00:32:02.830
that's just taking a context let's jump
in there

00:32:02.830 --> 00:32:02.840
in there
 

00:32:02.840 --> 00:32:05.409
in there
so again we're using a singleton

00:32:05.409 --> 00:32:05.419
so again we're using a singleton
 

00:32:05.419 --> 00:32:06.940
so again we're using a singleton
instance of a download manager for our

00:32:06.940 --> 00:32:06.950
instance of a download manager for our
 

00:32:06.950 --> 00:32:09.760
instance of a download manager for our
whole process this is also creating a

00:32:09.760 --> 00:32:09.770
whole process this is also creating a
 

00:32:09.770 --> 00:32:11.289
whole process this is also creating a
file because it needs to persist some

00:32:11.289 --> 00:32:11.299
file because it needs to persist some
 

00:32:11.299 --> 00:32:12.820
file because it needs to persist some
information about downloads that are in

00:32:12.820 --> 00:32:12.830
information about downloads that are in
 

00:32:12.830 --> 00:32:15.039
information about downloads that are in
progress and then we're instantiated a

00:32:15.039 --> 00:32:15.049
progress and then we're instantiated a
 

00:32:15.049 --> 00:32:16.779
progress and then we're instantiated a
download manager passing in the same

00:32:16.779 --> 00:32:16.789
download manager passing in the same
 

00:32:16.789 --> 00:32:18.700
download manager passing in the same
cache instance as the one that we're

00:32:18.700 --> 00:32:18.710
cache instance as the one that we're
 

00:32:18.710 --> 00:32:22.480
cache instance as the one that we're
using for the cache during playback you

00:32:22.480 --> 00:32:22.490
using for the cache during playback you
 

00:32:22.490 --> 00:32:23.710
using for the cache during playback you
can see also there's a data source

00:32:23.710 --> 00:32:23.720
can see also there's a data source
 

00:32:23.720 --> 00:32:25.419
can see also there's a data source
factory for loading data to populate the

00:32:25.419 --> 00:32:25.429
factory for loading data to populate the
 

00:32:25.429 --> 00:32:28.150
factory for loading data to populate the
cache and we've also got ADC raliser

00:32:28.150 --> 00:32:28.160
cache and we've also got ADC raliser
 

00:32:28.160 --> 00:32:30.310
cache and we've also got ADC raliser
for progressive download actions because

00:32:30.310 --> 00:32:30.320
for progressive download actions because
 

00:32:30.320 --> 00:32:34.020
for progressive download actions because
we're downloading progressive media ok

00:32:34.020 --> 00:32:34.030
we're downloading progressive media ok
 

00:32:34.030 --> 00:32:36.820
we're downloading progressive media ok
for get scheduler for the purposes of

00:32:36.820 --> 00:32:36.830
for get scheduler for the purposes of
 

00:32:36.830 --> 00:32:38.289
for get scheduler for the purposes of
our simple demo app we're just going to

00:32:38.289 --> 00:32:38.299
our simple demo app we're just going to
 

00:32:38.299 --> 00:32:40.120
our simple demo app we're just going to
leave this returning null but in a real

00:32:40.120 --> 00:32:40.130
leave this returning null but in a real
 

00:32:40.130 --> 00:32:41.620
leave this returning null but in a real
application you would want to provide

00:32:41.620 --> 00:32:41.630
application you would want to provide
 

00:32:41.630 --> 00:32:43.960
application you would want to provide
some kind of job scheduler so that the

00:32:43.960 --> 00:32:43.970
some kind of job scheduler so that the
 

00:32:43.970 --> 00:32:45.760
some kind of job scheduler so that the
system can start your download service

00:32:45.760 --> 00:32:45.770
system can start your download service
 

00:32:45.770 --> 00:32:47.350
system can start your download service
when your process isn't running in order

00:32:47.350 --> 00:32:47.360
when your process isn't running in order
 

00:32:47.360 --> 00:32:50.049
when your process isn't running in order
to resume downloads you can have a look

00:32:50.049 --> 00:32:50.059
to resume downloads you can have a look
 

00:32:50.059 --> 00:32:51.610
to resume downloads you can have a look
at our full demo app for an example of

00:32:51.610 --> 00:32:51.620
at our full demo app for an example of
 

00:32:51.620 --> 00:32:54.279
at our full demo app for an example of
how to do that finally we're going to

00:32:54.279 --> 00:32:54.289
how to do that finally we're going to
 

00:32:54.289 --> 00:32:56.590
how to do that finally we're going to
provide a progress notification and

00:32:56.590 --> 00:32:56.600
provide a progress notification and
 

00:32:56.600 --> 00:32:58.390
provide a progress notification and
we've got a handy utility method to

00:32:58.390 --> 00:32:58.400
we've got a handy utility method to
 

00:32:58.400 --> 00:33:00.460
we've got a handy utility method to
build one here this is going to take a

00:33:00.460 --> 00:33:00.470
build one here this is going to take a
 

00:33:00.470 --> 00:33:02.830
build one here this is going to take a
context an icon which is going to be

00:33:02.830 --> 00:33:02.840
context an icon which is going to be
 

00:33:02.840 --> 00:33:04.870
context an icon which is going to be
shown in the notification associated

00:33:04.870 --> 00:33:04.880
shown in the notification associated
 

00:33:04.880 --> 00:33:07.630
shown in the notification associated
with the download that's in progress and

00:33:07.630 --> 00:33:07.640
with the download that's in progress and
 

00:33:07.640 --> 00:33:09.549
with the download that's in progress and
we'll just use our playback I confer for

00:33:09.549 --> 00:33:09.559
we'll just use our playback I confer for
 

00:33:09.559 --> 00:33:12.039
we'll just use our playback I confer for
that then we'd provide the download

00:33:12.039 --> 00:33:12.049
that then we'd provide the download
 

00:33:12.049 --> 00:33:14.560
that then we'd provide the download
channel ID which is the same one that we

00:33:14.560 --> 00:33:14.570
channel ID which is the same one that we
 

00:33:14.570 --> 00:33:18.370
channel ID which is the same one that we
used earlier this one's actually a

00:33:18.370 --> 00:33:18.380
used earlier this one's actually a
 

00:33:18.380 --> 00:33:22.210
used earlier this one's actually a
string not a resource one one parameter

00:33:22.210 --> 00:33:22.220
string not a resource one one parameter
 

00:33:22.220 --> 00:33:25.419
string not a resource one one parameter
far ahead ok so we get our download

00:33:25.419 --> 00:33:25.429
far ahead ok so we get our download
 

00:33:25.429 --> 00:33:28.899
far ahead ok so we get our download
channel ID for our and we actually need

00:33:28.899 --> 00:33:28.909
channel ID for our and we actually need
 

00:33:28.909 --> 00:33:30.490
channel ID for our and we actually need
an intense next which we'll just pass

00:33:30.490 --> 00:33:30.500
an intense next which we'll just pass
 

00:33:30.500 --> 00:33:32.830
an intense next which we'll just pass
null for I think we've got a bit mixed

00:33:32.830 --> 00:33:32.840
null for I think we've got a bit mixed
 

00:33:32.840 --> 00:33:35.740
null for I think we've got a bit mixed
up with the parameters here so if you

00:33:35.740 --> 00:33:35.750
up with the parameters here so if you
 

00:33:35.750 --> 00:33:40.450
up with the parameters here so if you
remove download channel name oh easily

00:33:40.450 --> 00:33:40.460
remove download channel name oh easily
 

00:33:40.460 --> 00:33:43.590
remove download channel name oh easily
done there's a lots of parameters ok

00:33:43.590 --> 00:33:43.600
done there's a lots of parameters ok
 

00:33:43.600 --> 00:33:47.200
done there's a lots of parameters ok
then the message is no content intent is

00:33:47.200 --> 00:33:47.210
then the message is no content intent is
 

00:33:47.210 --> 00:33:49.270
then the message is no content intent is
null the message is no and we'll just

00:33:49.270 --> 00:33:49.280
null the message is no and we'll just
 

00:33:49.280 --> 00:33:51.669
null the message is no and we'll just
pass our task States which has

00:33:51.669 --> 00:33:51.679
pass our task States which has
 

00:33:51.679 --> 00:33:53.110
pass our task States which has
information about the downloads that are

00:33:53.110 --> 00:33:53.120
information about the downloads that are
 

00:33:53.120 --> 00:33:57.279
information about the downloads that are
in progress what their status is whew

00:33:57.279 --> 00:33:57.289
in progress what their status is whew
 

00:33:57.289 --> 00:34:00.370
in progress what their status is whew
that's a lot of parameters ok so that

00:34:00.370 --> 00:34:00.380
that's a lot of parameters ok so that
 

00:34:00.380 --> 00:34:01.510
that's a lot of parameters ok so that
looks pretty good

00:34:01.510 --> 00:34:01.520
looks pretty good
 

00:34:01.520 --> 00:34:03.399
looks pretty good
that's implementing our download service

00:34:03.399 --> 00:34:03.409
that's implementing our download service
 

00:34:03.409 --> 00:34:05.710
that's implementing our download service
the final step I promised is just

00:34:05.710 --> 00:34:05.720
the final step I promised is just
 

00:34:05.720 --> 00:34:07.120
the final step I promised is just
providing a way to trigger these

00:34:07.120 --> 00:34:07.130
providing a way to trigger these
 

00:34:07.130 --> 00:34:09.430
providing a way to trigger these
downloads from our activity so as you

00:34:09.430 --> 00:34:09.440
downloads from our activity so as you
 

00:34:09.440 --> 00:34:10.930
downloads from our activity so as you
can see we've got an empty list view

00:34:10.930 --> 00:34:10.940
can see we've got an empty list view
 

00:34:10.940 --> 00:34:12.820
can see we've got an empty list view
here we're going to replace that with a

00:34:12.820 --> 00:34:12.830
here we're going to replace that with a
 

00:34:12.830 --> 00:34:13.119
here we're going to replace that with a
live

00:34:13.119 --> 00:34:13.129
live
 

00:34:13.129 --> 00:34:15.190
live
samples so we've just got three items in

00:34:15.190 --> 00:34:15.200
samples so we've just got three items in
 

00:34:15.200 --> 00:34:18.339
samples so we've just got three items in
a playlist when the user taps one of

00:34:18.339 --> 00:34:18.349
a playlist when the user taps one of
 

00:34:18.349 --> 00:34:20.440
a playlist when the user taps one of
those we're going to trigger the

00:34:20.440 --> 00:34:20.450
those we're going to trigger the
 

00:34:20.450 --> 00:34:22.720
those we're going to trigger the
download to start and to do that well we

00:34:22.720 --> 00:34:22.730
download to start and to do that well we
 

00:34:22.730 --> 00:34:24.609
download to start and to do that well we
will be creating a progressive download

00:34:24.609 --> 00:34:24.619
will be creating a progressive download
 

00:34:24.619 --> 00:34:27.190
will be creating a progressive download
action if you were downloading a

00:34:27.190 --> 00:34:27.200
action if you were downloading a
 

00:34:27.200 --> 00:34:28.599
action if you were downloading a
different type of content like a -

00:34:28.599 --> 00:34:28.609
different type of content like a -
 

00:34:28.609 --> 00:34:29.859
different type of content like a -
stream then you would not use

00:34:29.859 --> 00:34:29.869
stream then you would not use
 

00:34:29.869 --> 00:34:31.180
stream then you would not use
progressive download action you'd use

00:34:31.180 --> 00:34:31.190
progressive download action you'd use
 

00:34:31.190 --> 00:34:32.740
progressive download action you'd use
the corresponding download action for

00:34:32.740 --> 00:34:32.750
the corresponding download action for
 

00:34:32.750 --> 00:34:34.829
the corresponding download action for
the type of stream you're downloading

00:34:34.829 --> 00:34:34.839
the type of stream you're downloading
 

00:34:34.839 --> 00:34:37.749
the type of stream you're downloading
that's going to take a URI it's going to

00:34:37.749 --> 00:34:37.759
that's going to take a URI it's going to
 

00:34:37.759 --> 00:34:38.919
that's going to take a URI it's going to
take a flag to say whether we're

00:34:38.919 --> 00:34:38.929
take a flag to say whether we're
 

00:34:38.929 --> 00:34:40.569
take a flag to say whether we're
removing or not we want to add it to the

00:34:40.569 --> 00:34:40.579
removing or not we want to add it to the
 

00:34:40.579 --> 00:34:43.450
removing or not we want to add it to the
cache so we'll pass in false we don't

00:34:43.450 --> 00:34:43.460
cache so we'll pass in false we don't
 

00:34:43.460 --> 00:34:45.129
cache so we'll pass in false we don't
want to associate any custom data so

00:34:45.129 --> 00:34:45.139
want to associate any custom data so
 

00:34:45.139 --> 00:34:46.629
want to associate any custom data so
we'll pass null for the data and the

00:34:46.629 --> 00:34:46.639
we'll pass null for the data and the
 

00:34:46.639 --> 00:34:50.799
we'll pass null for the data and the
custom cache key once we've created our

00:34:50.799 --> 00:34:50.809
custom cache key once we've created our
 

00:34:50.809 --> 00:34:52.389
custom cache key once we've created our
progressive download action all that

00:34:52.389 --> 00:34:52.399
progressive download action all that
 

00:34:52.399 --> 00:34:55.329
progressive download action all that
remains is to call a method on the

00:34:55.329 --> 00:34:55.339
remains is to call a method on the
 

00:34:55.339 --> 00:34:56.889
remains is to call a method on the
download service there's a static method

00:34:56.889 --> 00:34:56.899
download service there's a static method
 

00:34:56.899 --> 00:34:59.049
download service there's a static method
to start the service with that action

00:34:59.049 --> 00:34:59.059
to start the service with that action
 

00:34:59.059 --> 00:35:02.349
to start the service with that action
and that takes a context which is main

00:35:02.349 --> 00:35:02.359
and that takes a context which is main
 

00:35:02.359 --> 00:35:05.259
and that takes a context which is main
activity doc this not the item click

00:35:05.259 --> 00:35:05.269
activity doc this not the item click
 

00:35:05.269 --> 00:35:09.190
activity doc this not the item click
listener this okay

00:35:09.190 --> 00:35:09.200
listener this okay
 

00:35:09.200 --> 00:35:10.839
listener this okay
it takes the class of the download

00:35:10.839 --> 00:35:10.849
it takes the class of the download
 

00:35:10.849 --> 00:35:12.490
it takes the class of the download
service which is audio download service

00:35:12.490 --> 00:35:12.500
service which is audio download service
 

00:35:12.500 --> 00:35:15.130
service which is audio download service
class it takes the download action which

00:35:15.130 --> 00:35:15.140
class it takes the download action which
 

00:35:15.140 --> 00:35:16.660
class it takes the download action which
we've just created progressive download

00:35:16.660 --> 00:35:16.670
we've just created progressive download
 

00:35:16.670 --> 00:35:19.720
we've just created progressive download
action and finally we can pass Falls for

00:35:19.720 --> 00:35:19.730
action and finally we can pass Falls for
 

00:35:19.730 --> 00:35:21.039
action and finally we can pass Falls for
foreground because our activity is

00:35:21.039 --> 00:35:21.049
foreground because our activity is
 

00:35:21.049 --> 00:35:24.339
foreground because our activity is
already in the foreground okay it's

00:35:24.339 --> 00:35:24.349
already in the foreground okay it's
 

00:35:24.349 --> 00:35:25.809
already in the foreground okay it's
quite a few bits to remember there but

00:35:25.809 --> 00:35:25.819
quite a few bits to remember there but
 

00:35:25.819 --> 00:35:27.519
quite a few bits to remember there but
hopefully we've got everything let's

00:35:27.519 --> 00:35:27.529
hopefully we've got everything let's
 

00:35:27.529 --> 00:35:29.370
hopefully we've got everything let's
give that a try and see if it works

00:35:29.370 --> 00:35:29.380
give that a try and see if it works
 

00:35:29.380 --> 00:35:32.499
give that a try and see if it works
now we had plans to show you putting the

00:35:32.499 --> 00:35:32.509
now we had plans to show you putting the
 

00:35:32.509 --> 00:35:34.120
now we had plans to show you putting the
device into flight mode and playing back

00:35:34.120 --> 00:35:34.130
device into flight mode and playing back
 

00:35:34.130 --> 00:35:35.650
device into flight mode and playing back
the downloaded content but unfortunately

00:35:35.650 --> 00:35:35.660
the downloaded content but unfortunately
 

00:35:35.660 --> 00:35:37.569
the downloaded content but unfortunately
we're having to use cost to play the

00:35:37.569 --> 00:35:37.579
we're having to use cost to play the
 

00:35:37.579 --> 00:35:38.950
we're having to use cost to play the
stream so we won't actually be able to

00:35:38.950 --> 00:35:38.960
stream so we won't actually be able to
 

00:35:38.960 --> 00:35:41.349
stream so we won't actually be able to
show you the putting the device in

00:35:41.349 --> 00:35:41.359
show you the putting the device in
 

00:35:41.359 --> 00:35:42.190
show you the putting the device in
flight mode you'll need to use your

00:35:42.190 --> 00:35:42.200
flight mode you'll need to use your
 

00:35:42.200 --> 00:35:44.859
flight mode you'll need to use your
imagination as you can see when we tap

00:35:44.859 --> 00:35:44.869
imagination as you can see when we tap
 

00:35:44.869 --> 00:35:46.390
imagination as you can see when we tap
the items you get a little play icon

00:35:46.390 --> 00:35:46.400
the items you get a little play icon
 

00:35:46.400 --> 00:35:48.880
the items you get a little play icon
which is our download notification and

00:35:48.880 --> 00:35:48.890
which is our download notification and
 

00:35:48.890 --> 00:35:51.099
which is our download notification and
that's going to progress as the download

00:35:51.099 --> 00:35:51.109
that's going to progress as the download
 

00:35:51.109 --> 00:35:54.339
that's going to progress as the download
progresses and that's populating the

00:35:54.339 --> 00:35:54.349
progresses and that's populating the
 

00:35:54.349 --> 00:35:58.240
progresses and that's populating the
cache in the background ok so that's

00:35:58.240 --> 00:35:58.250
cache in the background ok so that's
 

00:35:58.250 --> 00:36:00.999
cache in the background ok so that's
pretty much it for downloading I'm now

00:36:00.999 --> 00:36:01.009
pretty much it for downloading I'm now
 

00:36:01.009 --> 00:36:02.440
pretty much it for downloading I'm now
going to hand back over to mark to say a

00:36:02.440 --> 00:36:02.450
going to hand back over to mark to say a
 

00:36:02.450 --> 00:36:04.779
going to hand back over to mark to say a
few words about cost yeah thank you

00:36:04.779 --> 00:36:04.789
few words about cost yeah thank you
 

00:36:04.789 --> 00:36:07.480
few words about cost yeah thank you
Andrew so there is a last important

00:36:07.480 --> 00:36:07.490
Andrew so there is a last important
 

00:36:07.490 --> 00:36:10.089
Andrew so there is a last important
integration we did not cover in code and

00:36:10.089 --> 00:36:10.099
integration we did not cover in code and
 

00:36:10.099 --> 00:36:11.890
integration we did not cover in code and
we will know coloring code it's the

00:36:11.890 --> 00:36:11.900
we will know coloring code it's the
 

00:36:11.900 --> 00:36:14.589
we will know coloring code it's the
integration with Google cost Google cost

00:36:14.589 --> 00:36:14.599
integration with Google cost Google cost
 

00:36:14.599 --> 00:36:18.009
integration with Google cost Google cost
is almost expected by all users by users

00:36:18.009 --> 00:36:18.019
is almost expected by all users by users
 

00:36:18.019 --> 00:36:21.609
is almost expected by all users by users
to be supported by media apps we've

00:36:21.609 --> 00:36:21.619
to be supported by media apps we've
 

00:36:21.619 --> 00:36:24.249
to be supported by media apps we've
recently added a cost extension which

00:36:24.249 --> 00:36:24.259
recently added a cost extension which
 

00:36:24.259 --> 00:36:26.049
recently added a cost extension which
makes integration with cost for

00:36:26.049 --> 00:36:26.059
makes integration with cost for
 

00:36:26.059 --> 00:36:26.740
makes integration with cost for
exoplayer

00:36:26.740 --> 00:36:26.750
exoplayer
 

00:36:26.750 --> 00:36:30.040
exoplayer
vacation pretty easier let's switch to

00:36:30.040 --> 00:36:30.050
vacation pretty easier let's switch to
 

00:36:30.050 --> 00:36:34.510
vacation pretty easier let's switch to
the slides again please the cue the cost

00:36:34.510 --> 00:36:34.520
the slides again please the cue the cost
 

00:36:34.520 --> 00:36:36.490
the slides again please the cue the cost
extension the costing sanction takes

00:36:36.490 --> 00:36:36.500
extension the costing sanction takes
 

00:36:36.500 --> 00:36:38.950
extension the costing sanction takes
advantage of the player interface of the

00:36:38.950 --> 00:36:38.960
advantage of the player interface of the
 

00:36:38.960 --> 00:36:42.340
advantage of the player interface of the
exoplayer library all the UI components

00:36:42.340 --> 00:36:42.350
exoplayer library all the UI components
 

00:36:42.350 --> 00:36:43.840
exoplayer library all the UI components
and other components like the player

00:36:43.840 --> 00:36:43.850
and other components like the player
 

00:36:43.850 --> 00:36:46.120
and other components like the player
notification manager the media session

00:36:46.120 --> 00:36:46.130
notification manager the media session
 

00:36:46.130 --> 00:36:47.590
notification manager the media session
connection which we've seen in action

00:36:47.590 --> 00:36:47.600
connection which we've seen in action
 

00:36:47.600 --> 00:36:49.630
connection which we've seen in action
take advantage of this player interface

00:36:49.630 --> 00:36:49.640
take advantage of this player interface
 

00:36:49.640 --> 00:36:52.530
take advantage of this player interface
and only rely on this player interface

00:36:52.530 --> 00:36:52.540
and only rely on this player interface
 

00:36:52.540 --> 00:36:55.480
and only rely on this player interface
the most prominent implementation of

00:36:55.480 --> 00:36:55.490
the most prominent implementation of
 

00:36:55.490 --> 00:36:57.100
the most prominent implementation of
this player interface is the simple

00:36:57.100 --> 00:36:57.110
this player interface is the simple
 

00:36:57.110 --> 00:36:59.560
this player interface is the simple
extra player almost all exoplayer

00:36:59.560 --> 00:36:59.570
extra player almost all exoplayer
 

00:36:59.570 --> 00:37:01.780
extra player almost all exoplayer
applications use the simplex a player

00:37:01.780 --> 00:37:01.790
applications use the simplex a player
 

00:37:01.790 --> 00:37:04.570
applications use the simplex a player
for local playback the cost extension

00:37:04.570 --> 00:37:04.580
for local playback the cost extension
 

00:37:04.580 --> 00:37:07.060
for local playback the cost extension
now adds another implementation of this

00:37:07.060 --> 00:37:07.070
now adds another implementation of this
 

00:37:07.070 --> 00:37:08.680
now adds another implementation of this
player interface which is the cost

00:37:08.680 --> 00:37:08.690
player interface which is the cost
 

00:37:08.690 --> 00:37:11.950
player interface which is the cost
player the cosplayer wraps the remote

00:37:11.950 --> 00:37:11.960
player the cosplayer wraps the remote
 

00:37:11.960 --> 00:37:15.130
player the cosplayer wraps the remote
media client of the cost SDK so it gets

00:37:15.130 --> 00:37:15.140
media client of the cost SDK so it gets
 

00:37:15.140 --> 00:37:18.520
media client of the cost SDK so it gets
pretty easy to swap local playback done

00:37:18.520 --> 00:37:18.530
pretty easy to swap local playback done
 

00:37:18.530 --> 00:37:20.470
pretty easy to swap local playback done
with the simplex a player with remote

00:37:20.470 --> 00:37:20.480
with the simplex a player with remote
 

00:37:20.480 --> 00:37:23.080
with the simplex a player with remote
playback of the cost player so if

00:37:23.080 --> 00:37:23.090
playback of the cost player so if
 

00:37:23.090 --> 00:37:25.570
playback of the cost player so if
because all those and components of the

00:37:25.570 --> 00:37:25.580
because all those and components of the
 

00:37:25.580 --> 00:37:27.430
because all those and components of the
exo player library and hopefully also

00:37:27.430 --> 00:37:27.440
exo player library and hopefully also
 

00:37:27.440 --> 00:37:30.280
exo player library and hopefully also
your application only rely on the player

00:37:30.280 --> 00:37:30.290
your application only rely on the player
 

00:37:30.290 --> 00:37:33.730
your application only rely on the player
interface you can exchange this local

00:37:33.730 --> 00:37:33.740
interface you can exchange this local
 

00:37:33.740 --> 00:37:35.620
interface you can exchange this local
playback with remote playback quite

00:37:35.620 --> 00:37:35.630
playback with remote playback quite
 

00:37:35.630 --> 00:37:38.350
playback with remote playback quite
easily you can also have a look at the

00:37:38.350 --> 00:37:38.360
easily you can also have a look at the
 

00:37:38.360 --> 00:37:40.900
easily you can also have a look at the
cost demo application which we add to

00:37:40.900 --> 00:37:40.910
cost demo application which we add to
 

00:37:40.910 --> 00:37:43.960
cost demo application which we add to
our github repository and we have also a

00:37:43.960 --> 00:37:43.970
our github repository and we have also a
 

00:37:43.970 --> 00:37:47.470
our github repository and we have also a
blog post on media or medium which shows

00:37:47.470 --> 00:37:47.480
blog post on media or medium which shows
 

00:37:47.480 --> 00:37:50.800
blog post on media or medium which shows
you how to set up the cost parts for

00:37:50.800 --> 00:37:50.810
you how to set up the cost parts for
 

00:37:50.810 --> 00:37:54.490
you how to set up the cost parts for
your application ok great thank you Mark

00:37:54.490 --> 00:37:54.500
your application ok great thank you Mark
 

00:37:54.500 --> 00:37:57.940
your application ok great thank you Mark
and so all that remains really is to

00:37:57.940 --> 00:37:57.950
and so all that remains really is to
 

00:37:57.950 --> 00:38:00.610
and so all that remains really is to
provide you with a link to the branch

00:38:00.610 --> 00:38:00.620
provide you with a link to the branch
 

00:38:00.620 --> 00:38:02.860
provide you with a link to the branch
which has the code that we've written

00:38:02.860 --> 00:38:02.870
which has the code that we've written
 

00:38:02.870 --> 00:38:04.270
which has the code that we've written
state or at least it'll be very similar

00:38:04.270 --> 00:38:04.280
state or at least it'll be very similar
 

00:38:04.280 --> 00:38:06.880
state or at least it'll be very similar
to the codes we've written today and

00:38:06.880 --> 00:38:06.890
to the codes we've written today and
 

00:38:06.890 --> 00:38:08.830
to the codes we've written today and
please go and check that out and try it

00:38:08.830 --> 00:38:08.840
please go and check that out and try it
 

00:38:08.840 --> 00:38:10.630
please go and check that out and try it
out you'll actually be able to try the

00:38:10.630 --> 00:38:10.640
out you'll actually be able to try the
 

00:38:10.640 --> 00:38:12.760
out you'll actually be able to try the
download functionality by putting your

00:38:12.760 --> 00:38:12.770
download functionality by putting your
 

00:38:12.770 --> 00:38:14.230
download functionality by putting your
device into flight mode and making sure

00:38:14.230 --> 00:38:14.240
device into flight mode and making sure
 

00:38:14.240 --> 00:38:15.550
device into flight mode and making sure
that it plays it back which we can't do

00:38:15.550 --> 00:38:15.560
that it plays it back which we can't do
 

00:38:15.560 --> 00:38:19.810
that it plays it back which we can't do
now so please check that out we have an

00:38:19.810 --> 00:38:19.820
now so please check that out we have an
 

00:38:19.820 --> 00:38:22.030
now so please check that out we have an
office hours session today at 3:30 and

00:38:22.030 --> 00:38:22.040
office hours session today at 3:30 and
 

00:38:22.040 --> 00:38:23.680
office hours session today at 3:30 and
please come along if you've got

00:38:23.680 --> 00:38:23.690
please come along if you've got
 

00:38:23.690 --> 00:38:25.450
please come along if you've got
questions and lots of members of the

00:38:25.450 --> 00:38:25.460
questions and lots of members of the
 

00:38:25.460 --> 00:38:26.740
questions and lots of members of the
team will be there and we'd be delighted

00:38:26.740 --> 00:38:26.750
team will be there and we'd be delighted
 

00:38:26.750 --> 00:38:28.750
team will be there and we'd be delighted
to meet you and find out about what

00:38:28.750 --> 00:38:28.760
to meet you and find out about what
 

00:38:28.760 --> 00:38:29.830
to meet you and find out about what
you're doing with extra player and how

00:38:29.830 --> 00:38:29.840
you're doing with extra player and how
 

00:38:29.840 --> 00:38:32.230
you're doing with extra player and how
we can help you with that this is a link

00:38:32.230 --> 00:38:32.240
we can help you with that this is a link
 

00:38:32.240 --> 00:38:34.570
we can help you with that this is a link
to our github project if you if you

00:38:34.570 --> 00:38:34.580
to our github project if you if you
 

00:38:34.580 --> 00:38:36.790
to our github project if you if you
haven't seen that before we have a

00:38:36.790 --> 00:38:36.800
haven't seen that before we have a
 

00:38:36.800 --> 00:38:38.860
haven't seen that before we have a
developer guide which takes you through

00:38:38.860 --> 00:38:38.870
developer guide which takes you through
 

00:38:38.870 --> 00:38:40.420
developer guide which takes you through
the process of getting started with EXO

00:38:40.420 --> 00:38:40.430
the process of getting started with EXO
 

00:38:40.430 --> 00:38:40.660
the process of getting started with EXO
play

00:38:40.660 --> 00:38:40.670
play
 

00:38:40.670 --> 00:38:42.789
play
at a slightly slower pace and it helps

00:38:42.789 --> 00:38:42.799
at a slightly slower pace and it helps
 

00:38:42.799 --> 00:38:44.309
at a slightly slower pace and it helps
to explain some of the background and

00:38:44.309 --> 00:38:44.319
to explain some of the background and
 

00:38:44.319 --> 00:38:48.009
to explain some of the background and
and finally as Mark alluded to we also

00:38:48.009 --> 00:38:48.019
and finally as Mark alluded to we also
 

00:38:48.019 --> 00:38:50.349
and finally as Mark alluded to we also
have a blog on medium where members of

00:38:50.349 --> 00:38:50.359
have a blog on medium where members of
 

00:38:50.359 --> 00:38:52.299
have a blog on medium where members of
the exoplayer team are writing blog

00:38:52.299 --> 00:38:52.309
the exoplayer team are writing blog
 

00:38:52.309 --> 00:38:53.890
the exoplayer team are writing blog
posts about new functionality that we're

00:38:53.890 --> 00:38:53.900
posts about new functionality that we're
 

00:38:53.900 --> 00:38:56.019
posts about new functionality that we're
working on so please do check that out

00:38:56.019 --> 00:38:56.029
working on so please do check that out
 

00:38:56.029 --> 00:38:59.079
working on so please do check that out
and subscribe and with that thank you

00:38:59.079 --> 00:38:59.089
and subscribe and with that thank you
 

00:38:59.089 --> 00:39:00.700
and subscribe and with that thank you
very much

00:39:00.700 --> 00:39:00.710
very much
 

00:39:00.710 --> 00:39:22.010
very much
[Music]

